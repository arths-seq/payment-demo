function bindCCEvent(){bindCardTypeEvent(),"Y"==$("#scLoginFlag").val()?renderSavedCards("credit"):$(".js_c_savecard").remove(),updateCcDcUserDetails(),$(".js_c_cvv").css({"font-family":"text-security-disc","-webkit-text-security":"disc"})}function bindCardTypeEvent(){$(".js_card_num").on("keydown keyup input change paste",function(){var e=$(this),a=e.data("cardtype"),t=e.val().split(" ").join("");if(""==t)e.parents(".r-tabs-panel").find(".expdate-block").show(),e.parents(".r-tabs-panel").find(".csv-inp").show(),$('.r-tabs-state-active [name="cvv"]').val(""),$("#cexpiry_mm").val($("#cexpiry_mm option:first").val()),$("#cexpiry_yy").val($("#cexpiry_yy option:first").val()),e.removeClass(function(e,a){return(a.match(/\w*-icon\w*/)||[]).join(" ")}),e.addClass(a+"logos");else{removeErrorDisplay("c1","cnumspan"),t=t.match(new RegExp(".{1,4}","g")).join(" "),e.val(t);var r=get_card_type(t).split("_")[1].toLowerCase();e.removeClass(function(e,a){return(a.match(/\w*-icon\w*/)||[]).join(" ")}),e.addClass(r+"-icon"),"maestro"==r?(e.parents(".r-tabs-panel").find(".expdate-block").hide(),e.parents(".r-tabs-panel").find(".csv-inp").hide(),$('.r-tabs-state-active [name="cvv"]').val("123"),$("#cexpiry_mm").val("01"),$("#cexpiry_yy").val("35")):(e.parents(".r-tabs-panel").find(".expdate-block").show(),e.parents(".r-tabs-panel").find(".csv-inp").show(),$('.r-tabs-state-active [name="cvv"]').val(""),$("#cexpiry_mm").val($("#cexpiry_mm option:first").val()),$("#cexpiry_yy").val($("#cexpiry_yy option:first").val())),"dr"==a&&("rupay"==r?$(".rupay-text").show():$(".rupay-text").hide())}})}function bindEmiEvent(){bindEmiCardTypeEvent(),updateEmiDetails(),emiBankSelect(),$(".js_emi_cvv").css({"font-family":"text-security-disc","-webkit-text-security":"disc"})}function emiBankSelect(){$(".emi-tenure-table").hide(),$("#emibank_select").change(function(){$(".note-text").hide();var e=$("#emibank_select").val(),a=e.toLowerCase();"HDFCEMI"==e&&$("#"+a+"-text").show(),$(".emii").hide(),$("#emic1").val(""),$("#emic1").css("border",""),$("#emic2").css("border",""),$("#emicnumspan").html(""),$("#emicnumspan").hide(),$("#emicexpiry_mm").val("MM"),$("#emicexpiry_yy").val("YYYY"),$("#emicvv").val(""),$("#emicexpiry_mm").css("border",""),$("#emicexpiry_yy").css("border",""),$("#emicexpiry_yyspan").html(""),$("#emicexpiry_yyspan").hide(),$("#emicvv").css("border",""),$("#emicvvspan").html(""),$("#emicvvspan").hide(),$("#emifullnamespan").html(""),$("#emibankspan").html(""),$("#emibank_select").css("border","");var t=$(this).val();if($("#emi_"+t).find("input[name=emitenure]").each(function(){$("#emi_"+t).find(":radio[name=emitenure]:first").prop("checked",!0)}),"0"!=t){$("#"+t).attr("id");$(".emai-tenure-block").show(),$(".emi-tenure-table").show(),$("#emi_"+t).show(),"AMEXEMI"==$("#emibank_select").val()?$("#emic1").removeClass("mastercard-icon").addClass("amex-icon"):$("#emic1").removeClass("amex-icon").removeClass("visa-icon").addClass("emilogos")}else $(".emii").hide(),$(".emai-tenure-block").hide(),$("#emic1").removeClass("amex-icon").removeClass("mastercard-icon").removeClass("visa-icon").addClass("emilogos")})}function bindEmiCardTypeEvent(){$("#emic1").keyup(function(){$("#btnemichk").removeAttr("disabled");var e=$(this).val().split(" ").join("");if(""==e)"AMEXEMI"==$("#emibank_select").val()?$("#emic1").addClass("amex-icon"):$("#emic1").removeClass("visa-icon").removeClass("mastercard-icon").removeClass("amex-icon").addClass("emilogos");else{$("#emic1").removeClass("visa-icon").removeClass("mastercard-icon").removeClass("amex-icon"),e=e.match(new RegExp(".{1,4}","g")).join(" ");var a=$("#emic1").val().substr(0,1);$("#emic1").val().substr(0,2);if(4==a){if("AMEXEMI"==$("#emibank_select").val())return addErrorDisplay("emic1","emicnumspan","Only american express cards are accepted."),!1;$("#emic1").addClass("visa-icon")}else if(5==a){if("AMEXEMI"==$("#emibank_select").val())return addErrorDisplay("emic1","emicnumspan","Only american express cards are accepted."),!1;$("#emic1").addClass("mastercard-icon")}else"AMEXEMI"==$("#emibank_select").val()?$("#emic1").addClass("amex-icon"):$("#emic1").addClass("emilogos")}}),$(".js_card_num ").keyup(function(){var e=$(this).val().split(" ").join("");e=e.match(new RegExp(".{1,4}","g")).join(" "),$(this).val(e)})}function bindDCEvent(){bindCardTypeEvent(),"Y"==$("#scLoginFlag").val()?renderSavedCards("debit"):$(".js_d_savecard").remove(),updateCcDcUserDetails(),$(".js_d_cvv").css({"font-family":"text-security-disc","-webkit-text-security":"disc"}),$("#c3").focusout(function(){var e=$("#c3").val().split(" ").join("");CardNumsub=e.substr(0,6),""!=CardNumsub&&e.length>=12&&ValidateDebitCardType("pgdc",CardNumsub)})}function bindCardNumSpacing(e){e.on("keypress change",function(e){$(this).val(function(e,a){return a.replace(/\W/gi,"").replace(/(.{4})/g,"$1 ")})})}function updateExpressPaymentListing(){$(".listing-panel").show(),$("#cardUqDetailsL").html(html_express_pay),$(".signup-in-block").hide()}function bindExpressPayments(){updateExpressPaymentsDetail(),"Y"===$('[name="tokenflg"]').val()&&"Y"===$('[name="scUserRegistered"]').val()&&updateExpressPaymentListing(),$("#scbtnLogin").click(function(){var e=$("#scuserEmail").val();e=Base64.encode(e);var a=$("#scpasswrd").val();a=Base64.encode(a);var t=$("#mercid").val(),r=$("#chmod").val(),s=$("#token").val(),i=$("#tokenflg").val();""==e?showfrmError("Enter your Mobile No./E-mail Id"):""==a?showfrmError("Enter your password"):($("#scpasswordspan").html(""),$.ajax({type:"POST",dataType:"json",url:"../pay/singleclickuser/ajaxloginconsumer_new.php",data:"email="+e+"&password="+a+"&mercid="+t+"&chmod="+r+"&token="+s+"&tokenflg="+i,success:function(e){200==e.status.trim()?($("#scbtnLogin").attr("disabled",!0),$("#frmErrors").css("display","none"),$("#expressPaymentID").show(),$("#cardUqDetailsL").html(e.arrCcdetail),$("#singleCloginKey").val(e.scloginkey),$("#cc_loginkey").val(e.scloginkey),$("form[name='ccfrm']").append('<input type="hidden" value="'+e.scloginkey+'" name="scloginkey" />'),$("#savecard").val("Y"),$("#savecardCredit").attr("onclick","javascript:void();"),$(".left-form-single-click3").hide(),$("#expressTab").hide()):showfrmError(e.msg)}}))}),$(".exp-send-otp, .cr-resend-otp").click(function(){var e=$(this).attr("id"),a=$("#mercid").val();if("exp_pay"==e)var t=$("#scuserEmail"),r="expressTab";else if("resend"==e)t=$("#otp_email");else if("resend_pgcc"==e)t=$("#otp_emailcc");else if("pgcc"==e)t=$("#SingleUser");var s=t.val();""==(s=Base64.encode(s))?showfrmError("Enter your Mobile No./E-mail Id"):(loader_show(),$.ajax({type:"POST",dataType:"json",url:"/pay/singleclickuser/generate_otp.php",data:"email="+s+"&mercid="+a,success:function(a){loader_hide();a.status.trim();if(200==a.status){var t=a.email;"pgcc"==e?($("#saved-cr .sign-up-block").fadeOut(),$("#saved-cr .sign-in-block").fadeOut()):$("#"+r).hide(),$("#otp_"+e).show(),$("#otp_"+e+" #otp_email").val(t),$(".success-block").css("display","block"),$(".success-block > p").html("OTP sent to your registered email id and to Mobile Number."),$(".success-block").delay(5e3).fadeOut("slow")}else showfrmError(a.msg)}}))}),$(".forgot-single").click(function(){$(".single-click-block .sign-in-block").fadeOut(),$(".single-click-block .forget-password").fadeIn()}),$(".forgot-back-single").click(function(){$(".single-click-block .forget-password").fadeOut(),$(".single-click-block .cr-otp-login-block").fadeOut(),$(".single-click-block .sign-in-block").fadeIn(),$(".single-click-block .sign-up-block").fadeIn()}),$(".frgtsub1").click(function(){sendForgotPasswordlink("express_pay",$("#forgotUserId").val())}),"MOBILE"==$("#scUserRegisteredWith").val()?$("#forgotUserId").val($('[name="buyerPhone"]').val()):$("#forgotUserId").val($('[name="buyerEmail"]').val())}function bindVAevent(){$(".va-input-block").find("#RID").remove(),$(".va-input-block").find("#rid").remove()}function bindPayLaterEvents(){updatePayLaterDetails();var e="",a=!1,t=!1,r="",s="",i="",n="";$("#pay-proceed").on("click",function(){$("head").append($("<link rel='stylesheet' href='js/jquery-ui/jquery-ui.min.css' type='text/css' media='screen' />")),$.getScript("js/jquery-ui/jquery-ui.min.js",function(){var e=new Date,a=e.getFullYear()-18;$("#dob").datepicker({changeMonth:!0,changeYear:!0,dateFormat:"dd-mm-yy",yearRange:"-120:-18",defaultDate:new Date(a,e.getMonth(),e.getDate())})});var l=$("#privatekey").val(),o=$("#orderid").val(),d=$("#airpay_transaction_id").val(),c=$("#amount").val(),p=$("#isocurrency").val(),m=$("#currency").val(),u=$("#mercid").val(),v=$("#MobileNo").val(),b=$("#EmailId").val(),y=$("#FirstName").val(),h=$("#LastName").val(),f=$("#buyerAddress").val(),g=$("#buyerCity").val(),_=$("#buyerState").val(),k=$("#buyerCountry").val(),C=$("#buyerPinCode").val(),x=$("#mobile_no").val(),E=$("#customvar").val(),w=$("#txnsubtype").val(),T=$("#checksum").val(),P=($("#category").val(),$("#txnmode").val()),I=$("#rid").val(),N=$("#buyerEmail").val(),D=$("#buyerPhone").val(),A=$("#buyerFirstName").val(),S=$("#buyerLastName").val();if(""==b)return $("#EmailId").next(".error-msg").addClass("display").html("Please enter email id."),!1;pvalue=b;var F=/^[_\.0-9a-zA-Z-]+@([0-9a-zA-Z][0-9a-zA-Z-]+\.)+[a-zA-Z]{2,6}$/i;if(!pvalue.match(F))return $("#EmailId").next(".error-msg").addClass("display").html("please enter valid email id."),!1;if($("#EmailId").next(".error-msg").removeClass("display"),""==v)return $("#MobileNo").next(".error-msg").addClass("display").html("Please enter mobile no."),!1;pvalue=v;F="[0-9]{10}";if(!pvalue.match(F))return $("#MobileNo").next(".error-msg").addClass("display").html("please enter valid mobile number."),!1;if($("#MobileNo").next(".error-msg").removeClass("display"),""==y)return $("#FirstName").next(".error-msg").addClass("display").html("please enter first name."),!1;pvalue=y;F="^[a-zA-Z]+$";if(!pvalue.match(F))return $("#FirstName").next(".error-msg").addClass("display").html("please enter valid first name."),!1;if($("#FirstName").next(".error-msg").removeClass("display"),""==h)return $("#LastName").next(".error-msg").addClass("display").html("Please enter last name."),!1;pvalue=h;F="^[a-zA-Z]+$";if(!pvalue.match(F))return $("#LastName").next(".error-msg").addClass("display").html("Please enter valid last name."),!1;$("#LastName").next(".error-msg").removeClass("display"),loader_show(),"SANDBOX"==P?callNewIndexapi("sandboxmode",l,o,I,c,p,m,u,v,b,y,h,f,g,_,k,C,x,E,w,T,s,i,n,r=""):$.ajax({type:"POST",dataType:"json",url:"/paylater/newindex_api.php",data:"action=checkEligibility&privatekey="+l+"&orderid="+o+"&mercid="+u+"&amount="+c+"&isocurrency="+p+"&currency="+m+"&buyerPhone1="+v+"&buyerEmail1="+b+"&buyerFirstName1="+y+"&buyerLastName1="+h+"&buyerAddress="+f+"&buyerCity="+g+"&buyerState="+_+"&buyerCountry="+k+"&buyerPinCode="+C+"&mobile_no="+v+"&customvar="+E+"&txnsubtype="+w+"&checksum="+T+"&pan="+s+"&aadhar="+i+"&otp="+n+"&divFlag="+r+"&rid="+I+"&buyerPhone="+D+"&buyerEmail="+N+"&buyerFirstName="+A+"&buyerLastName="+S,success:function(P){if(""!=P)if(loader_hide(),"true"==P.redirectionFlag)$("#frmerror").html(P.redirection),$("#error").submit();else{data1=JSON.parse(P),$("#rid").val(data1.RID);var I=$("#rid").val(),F=(data1.id,data1.paylater),B=data1.status;if(e=data1.govtIdRequired,"new"==B&&F){if("pan"==e)$("#AdharNo").attr("type","hidden");else if("aadhaar"==e)$("#PanNo").attr("type","hidden");else if(-1!=e.indexOf("and")){e.split("and");a=!0}else if(-1!=e.indexOf("or")){e.split("or");t=!0}else{$("#epay-uid").css("display","none"),$("#payltrNote").hide(),$("#P1").removeClass("hold"),$("#P1").addClass("comp"),$("#P2").addClass("comp"),loader_show(),$.ajax({type:"POST",dataType:"json",url:"/paylater/newindex_api.php",data:"action=validatePanAaadhar&privatekey="+l+"&orderid="+o+"&transactionId="+d+"&mercid="+u+"&amount="+c+"&isocurrency="+p+"&currency="+m+"&buyerPhone1="+v+"&buyerEmail1="+b+"&buyerFirstName1="+y+"&buyerLastName1="+h+"&buyerAddress="+f+"&buyerCity="+g+"&buyerState="+_+"&buyerCountry="+k+"&buyerPinCode="+C+"&mobile_no="+v+"&customvar="+E+"&txnsubtype="+w+"&checksum="+T+"&pan="+s+"&aadhar="+i+"&otp="+n+"&divFlag="+r+"&rid="+I+"&buyerPhone="+D+"&buyerEmail="+N+"&buyerFirstName="+A+"&buyerLastName="+S,success:function(e){if(""!=e)if(loader_hide(),"true"==e.redirectionFlag)$("#frmerror").html(e.redirection),$("#error").submit();else{data1=JSON.parse(e);data1.id;var a=data1.paylater;if("agreed"==data1.status&&a)$("#epay-otp").fadeIn(),$("#P3").addClass("hold"),$("body").addClass("otpClass"),$("body").hasClass("otpClass")&&($(".r-tabs-nav li").hide(),$("#pay_later").parent().show()),$.ajax({type:"POST",dataType:"json",url:"/paylater/newindex_api.php",data:"action=checkcredit&privatekey="+l+"&orderid="+o+"&transactionId="+d+"&mercid="+u+"&amount="+c+"&isocurrency="+p+"&currency="+m+"&buyerPhone1="+v+"&buyerEmail1="+b+"&buyerFirstName1="+y+"&buyerLastName1="+h+"&buyerAddress="+f+"&buyerCity="+g+"&buyerState="+_+"&buyerCountry="+k+"&buyerPinCode="+C+"&mobile_no="+v+"&customvar="+E+"&txnsubtype="+w+"&checksum="+T+"&pan="+s+"&aadhar="+i+"&otp="+n+"&divFlag="+r+"&rid="+I+"&buyerPhone="+D+"&buyerEmail="+N+"&buyerFirstName="+A+"&buyerLastName="+S,success:function(e){data1=JSON.parse(e),data1.availableCreditLimit>=c&&$("#avail-bal").html("Available credit limit : <strong>INR "+data1.availableCreditLimit+"<strong>")}});else{if("false"!=data1.redirectionFlag)return showfrmError(data1.message),!1;callNewIndexapi("updatefailTransaction",l,o,I,c,p,m,u,v,b,y,h,f,g,_,k,C,x,E,w,T,s,i,n,r="validatePanAdhar",D,N,A,S)}}else callNewIndexapi("updatefailTransaction",l,o,I,c,p,m,u,v,b,y,h,f,g,_,k,C,x,E,w,T,s,i,n,r="validatePanAdhar",D,N,A,S)}})}$("#epay-details").hide(),$("#payltrNote").hide(),$("#P1").removeClass("hold"),$("#P1").addClass("comp"),$("#P2").addClass("hold"),"none"!=e&&($("#epay-uid").fadeIn(),$("body").addClass("otpClass"),$("body").hasClass("otpClass")&&($(".r-tabs-nav li").hide(),$("#pay_later").parent().show()))}else{if("invalidInput"==data1.reason&&400==data1.code)return showfrmError(data1.message),!1;callNewIndexapi("updatefailTransaction",l,o,I,c,p,m,u,v,b,y,h,f,g,_,k,C,x,E,w,T,s,i,n,r="checkEligibility",D,N,A,S)}}else callNewIndexapi("updatefailTransaction",l,o,I,c,p,m,u,v,b,y,h,f,g,_,k,C,x,E,w,T,s,i,n,r="checkEligibility",D,N,A,S)}})}),$("#otp-proceed").click(function(){var s=$("#privatekey").val(),i=$("#orderid").val(),l=$("#airpay_transaction_id").val(),o=$("#amount").val(),d=$("#isocurrency").val(),c=$("#currency").val(),p=$("#mercid").val(),m=($("#MobileNo").val(),$("#EmailId").val(),$("#MobileNo1").val()),u=$("#buyerEmail").val(),v=$("#buyerPhone").val(),b=$("#buyerFirstName").val(),y=$("#buyerLastName").val(),h=$("#EmailId1").val(),f=$("#FirstName").val(),g=$("#LastName").val(),_=$("#buyerAddress").val(),k=$("#buyerCity").val(),C=$("#buyerState").val(),x=$("#buyerCountry").val(),E=$("#buyerPinCode").val(),w=$("#mobile_no").val(),T=$("#customvar").val(),P=$("#txnsubtype").val(),I=$("#checksum").val(),N=($("#category").val(),$("#PanNo").val().toUpperCase()),D=$("#AdharNo").val(),A=$("#dob").val(),S=(new Date,$("#rid").val()),F=$("#validateflag").val();if(buyerPhone=""!=m?$("#MobileNo1").val():$("#MobileNo").val(),buyerEmail=""!=h?$("#EmailId1").val():$("#EmailId").val(),"set"==F){if(""==h)return $("#EmailId1").next(".error-msg").addClass("display").html("Please enter email id."),!1;pvalue=buyerEmail;var B=/^[_\.0-9a-zA-Z-]+@([0-9a-zA-Z][0-9a-zA-Z-]+\.)+[a-zA-Z]{2,6}$/i;if(!pvalue.match(B))return $("#EmailId1").next(".error-msg").addClass("display").html("Please enter valid email id."),!1;if($("#EmailId1").next(".error-msg").removeClass("display"),""==buyerPhone)return $("#MobileNo1").next(".error-msg").addClass("display").html("Please enter mobile no."),!1;pvalue=buyerPhone;B="[0-9]{10}";if(!pvalue.match(B))return"#MobileNo1".next(".error-msg").addClass("display").html("Please enter valid mobile no."),!1;$("#MobileNo1").next(".error-msg").removeClass("display")}if("aadhaar"==e||"panandaadhaar"==e||"panoraadhaar"==e)if(""==D){if($("#AdharNo").next(".error-msg").addClass("display").html("Please enter aadhar no."),!t)return!1;$("#AdharNo").next(".error-msg").removeClass("display")}else{pvalue=D;B="[0-9]{12}";if(!pvalue.match(B))return $("#AdharNo").next(".error-msg").addClass("display").html("Please enter valid adhar no."),!1;$("#AdharNo").next(".error-msg").removeClass("display")}if("pan"==e||"panandaadhaar"==e||"panoraadhaar"==e)if(""==N){if($("#PanNo").next(".error-msg").addClass("display").html("Please enter pan no."),!t)return!1;$("#PanNo").next(".error-msg").removeClass("display")}else{pvalue=N;B=/^([A-Z]{5})([0-9]{4})([A-Z]{1})$/;if(!pvalue.match(B))return $("#PanNo").next(".error-msg").addClass("display").html("Please enter valid pan no."),!1;$("#PanNo").next(".error-msg").removeClass("display")}if("pan"==e||"aadhaar"==e||"panandaadhaar"==e||"panoraadhaar"==e){if(""==A&&(""!=N||""!=D))return $("#dob").next(".error-msg").addClass("display").html("Please select date of birth."),!1;if(""==N&&""==D&&""==A&&t)return showfrmError("Pan or addhar and date of birth is mandatory"),!1;if(""==N&&""==D&&""==A&&a)return showfrmError("Pan,aadhar and date of birth is mandatory"),!1;if(!function(e){dob=new Date(e);var a=new Date;return!(Math.floor((a-dob)/315576e5)<18)}(A))return $("#dob").next(".error-msg").addClass("display").html("Age should be greater than 18 years."),!1;$("#dob").next(".error-msg").removeClass("display")}if(""==N&&""==D&&t)return showfrmError("Pan or aadhaar is mandatory"),!1;loader_show(),$.ajax({type:"POST",dataType:"json",url:"/paylater/newindex_api.php",data:"action=validatePanAaadhar&privatekey="+s+"&orderid="+i+"&transactionId="+l+"&mercid="+p+"&amount="+o+"&isocurrency="+d+"&currency="+c+"&buyerPhone1="+buyerPhone+"&buyerEmail1="+buyerEmail+"&buyerFirstName1="+f+"&buyerLastName1="+g+"&buyerAddress="+_+"&buyerCity="+k+"&buyerState="+C+"&buyerCountry="+x+"&buyerPinCode="+E+"&mobile_no="+buyerPhone+"&customvar="+T+"&txnsubtype="+P+"&checksum="+I+"&pan="+N+"&aadhar="+D+"&otp="+n+"&divFlag="+r+"&dob="+A+"&rid="+S+"&validateFlag="+F+"&buyerPhone="+v+"&buyerEmail="+u+"&buyerFirstName="+b+"&buyerLastName="+y,success:function(e){if(""!=e)if("true"==e.redirectionFlag)$("#frmerror").html(e.redirection),$("#error").submit();else{data1=JSON.parse(e);data1.id;var a=data1.paylater,t=data1.status;if("agreed"==t&&a)$("#validateflag").val("unset"),F=$("#validateflag").val(),loader_hide(),$("#epay-uid").hide(),$("#payltrNote").hide(),$("#P1").addClass("comp"),$("#P2").addClass("comp"),$("#P2").addClass("hold"),$("#epay-otp").fadeIn(),$("#P3").addClass("hold"),$("body").addClass("otpClass"),$("body").hasClass("otpClass")&&($("r-tabs-nav li").hide(),$("#pay_later").parent().show()),$.ajax({type:"POST",dataType:"json",url:"/paylater/newindex_api.php",data:"action=checkcredit&privatekey="+s+"&orderid="+i+"&transactionId="+l+"&mercid="+p+"&amount="+o+"&isocurrency="+d+"&currency="+c+"&buyerPhone1="+buyerPhone+"&buyerEmail1="+buyerEmail+"&buyerFirstName1="+f+"&buyerLastName1="+g+"&buyerAddress="+_+"&buyerCity="+k+"&buyerState="+C+"&buyerCountry="+x+"&buyerPinCode="+E+"&mobile_no="+buyerPhone+"&customvar="+T+"&txnsubtype="+P+"&checksum="+I+"&pan="+N+"&aadhar="+D+"&otp="+n+"&divFlag="+r+"&rid="+S+"&buyerPhone="+v+"&buyerEmail="+u+"&buyerFirstName="+b+"&buyerLastName="+y,success:function(e){data1=JSON.parse(e),data1.availableCreditLimit>=o&&$("#avail-bal").html("Available credit limit : <strong>INR "+data1.availableCreditLimit+"<strong>")}});else{if("EPL1002"!=data1.eplErrorCode&&"EPL1001"!=data1.eplErrorCode&&"500"!=data1.code)return loader_hide(),showfrmError(data1.message),$("#validateflag").val("set"),$("#MobileNo1").val(buyerPhone),$("#EmailId1").val(buyerEmail),F=$("#validateflag").val(),$(".regdetails").css("display","block"),"new"!=t||a||(r="checkEligibility",callNewIndexapi("updatefailTransaction",s,i,S,o,d,c,p,buyerPhone,buyerEmail,f,g,_,k,C,x,E,w,T,P,I,N,D,n,r,v,u,b,y)),!1;r="validatePanAdhar",callNewIndexapi("updatefailTransaction",s,i,S,o,d,c,p,buyerPhone,buyerEmail,f,g,_,k,C,x,E,w,T,P,I,N,D,n,r,v,u,b,y)}}else r="validatePanAdhar",callNewIndexapi("updatefailTransaction",s,i,S,o,d,c,p,buyerPhone,buyerEmail,f,g,_,k,C,x,E,w,T,P,I,N,D,n,r,v,u,b,y)}})}),$("#otp-validate").click(function(){var e=$("#privatekey").val(),a=$("#orderid").val(),t=$("#airpay_transaction_id").val(),s=$("#amount").val(),i=$("#isocurrency").val(),n=$("#currency").val(),l=$("#mercid").val(),o=$("#MobileNo").val(),d=$("#EmailId").val(),c=$("#FirstName").val(),p=$("#LastName").val(),m=$("#buyerAddress").val(),u=$("#buyerCity").val(),v=$("#buyerState").val(),b=$("#buyerCountry").val(),y=$("#buyerPinCode").val(),h=$("#mobile_no").val(),f=$("#customvar").val(),g=$("#txnsubtype").val(),_=$("#checksum").val(),k=($("#category").val(),$("#PanNo").val()),C=$("#AdharNo").val(),x=$("#payltrotp").val(),E=$("#rid").val(),w=$("#buyerEmail").val(),T=$("#buyerPhone").val(),P=$("#buyerFirstName").val(),I=$("#buyerLastName").val();return""==x?($("#payltrotp").next(".error-msg").addClass("display").html("Please enter otp."),!1):x.length<4?($("#payltrotp").next(".error-msg").addClass("display").html("Please enter valid otp."),!1):x.match(/\s/g)?($("#payltrotp").next(".error-msg").addClass("display").html("Spaces are not allowed."),!1):($("#payltrotp").next(".error-msg").removeClass("display"),loader_show(),void $.ajax({type:"POST",dataType:"json",url:"/paylater/newindex_api.php",data:"action=validateOTP&privatekey="+e+"&orderid="+a+"&transactionId="+t+"&mercid="+l+"&amount="+s+"&isocurrency="+i+"&currency="+n+"&buyerPhone1="+o+"&buyerEmail1="+d+"&buyerFirstName1="+c+"&buyerLastName1="+p+"&buyerAddress="+m+"&buyerCity="+u+"&buyerState="+v+"&buyerCountry="+b+"&buyerPinCode="+y+"&mobile_no="+o+"&customvar="+f+"&txnsubtype="+g+"&checksum="+_+"&pan="+k+"&aadhar="+C+"&otp="+x+"&divFlag="+r+"&rid="+E+"&buyerPhone="+T+"&buyerEmail="+w+"&buyerFirstName="+P+"&buyerLastName="+I,success:function(t){if(""!=t)if(loader_hide(),"true"==t.redirectionFlag)$("#frmerror").html(t.redirection),$("#error").submit();else{data1=JSON.parse(t);data1.id;var N=data1.paylater;if("delivered"==data1.status&&N)callNewIndexapi("doPaymentCall",e,a,E,s,i,n,l,o,d,c,p,m,u,v,b,y,h,f,g,_,k,C,x,r="validateOTP",T,w,P,I);else{if("invalidInput"==data1.reason&&400==data1.code)return showfrmError(data1.message),$("#payltrotp").val(""),!1;callNewIndexapi("updatefailTransaction",e,a,E,s,i,n,l,o,d,c,p,m,u,v,b,y,h,f,g,_,k,C,x,r="validateOTP",T,w,P,I)}}else callNewIndexapi("updatefailTransaction",e,a,E,s,i,n,l,o,d,c,p,m,u,v,b,y,h,f,g,_,k,C,x,r="validateOTP",T,w,P,I)}}))}),$("#payltrCheck1").click(function(){$(this).is(":checked")?($("#pay-proceed").removeAttr("disabled"),$("#pay-proceed").removeClass("disable-btn")):($("#pay-proceed").attr("disabled",!0),$("#pay-proceed").addClass("disable-btn"))}),$(document).on("click",".payltrtnc",function(){var e=$(this).data("type");$.ajax({type:"POST",url:"ajax_paylater.php",data:"paylater-popup="+e,success:function(a){"tncpayltr"==e?($(".epay-tnc-block").html(a),$(".epay-block").hide(),$(".epay-tnc-block").show()):"aboutpayltr"==e&&($(".epay-block").html(a),$(".epay-tnc-block").hide(),$(".epay-block").show())},error:function(e){successmessage="Error"}})}),$("#frmErrors").delay(6e3).fadeOut("slow"),$(document).on("click","#what-epay",function(){$(".epay-block").css("display","block"),$("body").css("overflow","hidden")}),$(document).on("click","#cls-popup-faq",function(){$(".epay-block").css("display","none"),$("body").css("overflow","")}),$(document).on("click","#payltr-tnc",function(){$(".epay-tnc-block").css("display","block"),$("body").css("overflow","hidden")}),$(document).on("click","#cls-popup-tnc",function(){$(".epay-tnc-block").css("display","none"),$("body").css("overflow","")})}function callNewIndexapi(e,a,t,r,s,i,n,l,o,d,c,p,m,u,v,b,y,h,f,g,_,k,C,x,E,w,T,P,I){$.ajax({type:"POST",dataType:"json",url:"/paylater/newindex_api.php",data:"action="+e+"&privatekey="+a+"&orderid="+t+"&mercid="+l+"&amount="+s+"&isocurrency="+i+"&currency="+n+"&buyerPhone1="+o+"&buyerEmail1="+d+"&buyerFirstName1="+c+"&buyerLastName1="+p+"&buyerAddress="+m+"&buyerCity="+u+"&buyerState="+v+"&buyerCountry="+b+"&buyerPinCode="+y+"&mobile_no="+o+"&customvar="+f+"&txnsubtype="+g+"&checksum="+_+"&pan="+k+"&aadhar="+C+"&otp="+x+"&divFlag="+E+"&rid="+r+"&buyerPhone="+w+"&buyerEmail="+T+"&buyerFirstName="+P+"&buyerLastName="+I,success:function(e){"true"==e.fsub?(loader_show(),window.location.href=e.url):($("#frmerror").html(e.redirection),$("#error").submit())}})}function bindCashEvents(){$("#cash_pincode").keyup(function(){$(".inlinePins").hide();var e=$(this).val();6!=e.length||isNaN(e)?($(".inlinePins").show(),$("#listArea").hide()):$.ajax({type:"POST",url:"inlinePincodes.php",data:"pincode="+e,success:function(e){$(".inlinePins").show(),"1"==(e=e.trim())?($("#cashaddrtitle").show(),$(".inlinePins").html('<div class="result-pin-add"><p>No records found!</p></div>')):"2"==e?($("#cashaddrtitle").show(),$(".inlinePins").html('<div class="result-pin-add"><p>No records found!</p></div>')):""==e?($("#cashaddrtitle").show(),$(".inlinePins").html('<div class="result-pin-add"><p>No records found!</p></div><div class="pin-res-nav"><div id="how-cash" class="fl"><a href="javascript:void(0);" class="fl">how does it work?</a><div class="howcash-content"><p><strong>Step 1:</strong> You will get an SMS with your unique &quot;airpay id&quot;.</p><p><strong>Step 2:</strong> Go to the closest deposit location. You can find more locations by smsing &quot;paycash &lt;your pincode&gt;&quot; to 54646.</p><p><strong>Step 3:</strong> Give the agent your unique &quot;airpay id&quot; and cash.</p><p><strong>Step 4:</strong> Take your confirmation receipt from the agent.</p></div></div></div>')):($("#cashaddrtitle").show(),$(".inlinePins").html(e),$("#listArea").show())},error:function(e){successmessage="Error"}})}),$("#cash_mobnumber").val($('[name="buyerPhone"]').val())}function bindNetEvent(){updateNetBankDetails(),$("#popularBanks input[name='nbbank_radio']").click(function(){var e=$(this).attr("value");$("#nbbank_select").val(e),$("#nbbank_selectspan").html(""),document.getElementById("nbbank_select").style.borderColor=""}),$("#nbbank_select").change(function(){"0"==$("#nbbank_select").val()?$("#nbbank_selectspan").html("Please select the bank."):$("#nbbank_selectspan").html("");var e=$(this).val();$("#popularBanks .radio-box").prop("checked",!1),$("#popularBanks #"+e+"_bank").prop("checked",!0);$("#nbbank_select").val()})}function bindWalletEvent(){updateWalletDetails(),$(".sign-mobile,#mobilefree").val($("#buyerPhone").val()),$('.sign-email,[name="citrus[username]"],#usernamefree').val($("#buyerEmail").val()),$("#requestid1").val($("#rid").val()),$('[name="citrus[amount]"]').val($("#amount").val()),$('input:radio[name="prepaid_radio"]').change(function(){if($('input:radio[name="prepaid_radio"]').each(function(){$(this).parent().removeClass("active")}),$(this).is(":checked")?$(this).parent().addClass("active"):$(".bank-label").removeClass("active"),$("form#ccfrm").find("#amount").val()>9999)return $("#frmErrors").show().html('<div class="error-img-block"></div><p>This amount is above the set daily transaction limit by your bank, please try another payment method</p>'),$(".wallet-block-content").show(),$(".citrus-click-block").hide(),$("form#ppfrm").find("#ppc_submit").hide(),!1;if($(this).is(":checked")&&"CITRUS"===$(this).val())(e=document.createElement("script")).type="text/javascript",e.src="/pay/js/citrus2.js",document.getElementsByTagName("head")[0].appendChild(e),$(".wallet-block-content").hide(),$(".citrus-click-block").hide(),$(".wallet-citrus-otp").hide(),$(".wallet-citrus-checkbal").hide(),$(".citrus-click-block").show(),$(".wallet-citurs-login").show(),$(".error-msg.mobile-span").hide();else if($(this).is(":checked")&&"FREE"===$(this).val()){(e=document.createElement("script")).type="text/javascript",e.src="/pay/js/freecharge.js",document.getElementsByTagName("head")[0].appendChild(e),$(".wallet-block-content").hide(),$(".freecharge-click-block").hide(),$(".wallet-freecharge-otp").hide(),$(".wallet-freecharge-checkbal").hide(),$(".freecharge-click-block").show(),$(".wallet-freecharge-login").show(),$(".error-msg.mobile-span").hide()}else if($(this).is(":checked")&&"YSE"===$(this).val()){var e;(e=document.createElement("script")).type="text/javascript",e.src="/pay/js/sodexo.js",document.getElementsByTagName("head")[0].appendChild(e),$(".wallet-block-content").hide(),$(".sodexo-click-block").show(),$(".delink-click-block").hide()}else $(".citrus-click-block").hide(),$(".wallet-citrus-otp").hide(),$(".wallet-citurs-login").hide(),$(".citrus-click-block").hide(),$(".wallet-citrus-checkbal").hide(),$(".wallet-block-content").show()}),validateFreeChargeWallet()}function validateFreeChargeWallet(){var e,a=$("#mobilefree").val(),t=$(".error-msg.mobile-span"),r=$("#usernamefree").val(),s=$(".error-msg.email-span"),i=!0;return $(".tab-loader").hide(),""==r?(s.addClass("display").html("Please enter email."),i=!1):(e=/^[_\.0-9a-zA-Z-]+@([0-9a-zA-Z][0-9a-zA-Z-]+\.)+[a-zA-Z]{2,6}$/i,r.match(e)?s.removeClass("display"):(s.addClass("display").html("Please enter valid email."),i=!1)),""==a?(t.addClass("display").html("Please enter phone no."),i=!1):(e="[0-9]{10}",a.match(e)?t.removeClass("display"):(t.addClass("display").html("Please enter valid mobile no."),i=!1)),i}function cancel_transaction(e){void 0===e&&(e="");var a=$("#privatekey").val(),t=$("#orderid").val(),r=$("#airpay_transaction_id").val(),s=$("#amount").val(),i=$("#mercid").val(),n=$("#customvar").val(),l=$("#checksum").val(),o=$("#RID").val(),d=$("#response_manage_upi").val(),c=$("#walletflg").val(),p=$("#wallet").val();$("#upi_form_field").html('<form action="'+d+'" id="upi_form" name="upi_form" method="post" ><input type="hidden" name="action" value="cancel_transaction" /><input type="hidden" name="BANK_RESPONSE" value="'+e+'" /><input type="hidden" name="privatekey" value="'+a+'" /><input type="hidden" name="orderid" value="'+t+'" /><input type="hidden" name="transaction_id" value="'+r+'" /><input type="hidden" name="mercid" value="'+i+'" /><input type="hidden" name="amount" value="'+s+'" /><input type="hidden" name="tabselect" value="upi" /><input type="hidden" name="customvar" value="'+n+'" /><input type="hidden" name="checksum" value="'+l+'" /><input type="hidden" name="RID" value="'+o+'" /><input type="hidden" name="walletflg" value="'+c+'" /><input type="hidden" name="wallet" value="'+p+'" /></form>'),$(".cancel_transaction").addClass("disable-btn"),ask_worning_for_close=!1,document.forms.upi_form.submit()}function bindUpiEvent(){function e(){$(".qr-code").show(),$("#upi-mob-inst").fadeOut(),$("body").css("overflow","")}$("#upi_vpa").click(function(){var a=document.getElementById("payer_vpa_text").value;if(""==a.trim())return addErrorDisplay("payer_vpa_text","upi_vpa_error","Please enter vpa."),!1;if(a.length>255)return addErrorDisplay("payer_vpa_text","upi_vpa_error","Vpa length can not be greater than 255."),!1;if(!a.match(/^.+@.+$/)||/\s/.test(a))return addErrorDisplay("payer_vpa_text","upi_vpa_error","Please enter valid vpa."),!1;var t=$("#privatekey").val(),r=$("#orderid").val(),s=$("#airpay_transaction_id").val(),i=$("#amount").val(),n=$("#isocurrency").val(),l=$("#currency").val(),o=$("#mercid").val(),d=$("#buyerPhone").val(),c=$("#buyerEmail").val(),p=$("#buyerFirstName").val(),m=$("#buyerLastName").val(),u=$("#buyerAddress").val(),v=$("#buyerCity").val(),b=$("#buyerState").val(),y=$("#buyerCountry").val(),h=$("#buyerPinCode").val(),f=$("#customvar").val(),g=$("#txnsubtype").val(),_=$("#checksum").val(),k=$("#walletflg").val(),C=$("#wallet").val();$("#payee_vpa").html(a);var x,E={apiName:"collectVPA",payer_vpa:a,action:"upi_vpa",privatekey:t,orderid:r,transaction_id:s,mercid:o,amount:i,isocurrency:n,currency:l,buyerPhone:d,buyerEmail:c,buyerFirstName:p,buyerLastName:m,buyerAddress:u,buyerCity:v,buyerState:b,buyerCountry:y,buyerPinCode:h,tabselect:"upi",customvar:f,submode:"vpa",txnsubtype:g,walletflg:k,wallet:C,checksum:_};$("#upi_vpa").addClass("disable-btn"),document.getElementById("upi_vpa").disabled="disabled",x=E,$.ajax({type:"POST",url:"/upi/newindex_api.php",dataType:"json",data:x,success:function(a){if("object"!=typeof a)return e(),addErrorDisplay("payer_vpa_text","upi_vpa_error","Something went wrong! Refresh page & try again"),!1;var t=a.status,r=void 0!==a.error_redirection&&"yes"==a.error_redirection?"Y":"N";if("Y"==r){var s="<form action='"+a.url+"' method='post'>";return $.each(a.params,function(e,a){s+="<input type='hidden' name='"+e+"' value='"+a+"'>"}),s+="</form>",$(s).appendTo("body").submit(),!1}if(400==t&&void 0!==a.method&&"checkvpa"==a.method.trim())return $("#upi_vpa").data("clicked",!1),$("#upi_vpa").removeClass("disable-btn"),document.getElementById("upi_vpa").disabled="",addErrorDisplay("payer_vpa_text","upi_vpa_error",a.err),!1;if(200==t&&void 0!==a.method&&"sandbox"==a.method.trim())return $("#upi_form_field").html('<form action="'+a.url+'" id="upi_form" name="upi_form" method="post" ><input type="hidden" name="mid" value="'+a.mid+'" />\n                                <input type="hidden" name="mode" value="'+a.mode+'" />\n                                <input type="hidden" name="submode" value="'+a.submode+'" />\n                                <input type="hidden" name="RID" value="'+a.RID+'" />\n                                <input type="hidden" name="txnid" value="'+a.txnid+'" />\n                                </form>'),ask_worning_for_close=!1,document.forms.upi_form.submit(),!1;$("#RID").val(a.RID),removeErrorDisplay("payer_vpa_text","upi_sms_error");var i=a.status;200==i?($(".qr-code").hide(),upiVpaCancelBtnOriginalText=$("#qrimgbtn2").val(),upiVpaCrossBtnFlag=!1,$("#qrimgbtn2").addClass("disable-btn"),document.getElementById("qrimgbtn2").disabled="disabled",$("#qrimgbtn2").val("Processing your request.."),$("body").css("overflow","hidden"),$("#upi-mob-inst").fadeIn(),$(".upi-popup").css("left","0"),$(".upi-popup").css("top","0"),upiVpaCrossBtnFlag=!0,$("#qrimgbtn2").removeClass("disable-btn"),document.getElementById("qrimgbtn2").disabled="",$("#qrimgbtn2").val(upiVpaCancelBtnOriginalText),settimer("session_time_vpa","vpa"),txnCheckInt_all=setInterval(function(){check_interval_call(a.ch_id)},1e4)):400==i&&""!=a.err_msg.trim()?cancel_transaction(a.err_msg.trim()):cancel_transaction("Something went wrong! Please try again.")},complete:function(){},error:function(){return e(),addErrorDisplay("payer_vpa_text","upi_vpa_error","Something went wrong! Refresh page & try again"),!1}})}),$("#qr-pop").click(function(){var e=$(this);if(!e.data("clicked")){e.data("clicked",!0);var a,t,r,s,i,n,l,o,d,c,p,m,u,v,b,y,h,f,g,_,k,C,x,E,w=$("#privatekey").val(),T=$("#orderid").val(),P=$("#airpay_transaction_id").val(),I=$("#amount").val(),N=$("#isocurrency").val(),D=$("#currency").val(),A=$("#mercid").val(),S=$("#buyerPhone").val(),F=$("#buyerEmail").val(),B=$("#buyerFirstName").val(),j=$("#buyerLastName").val(),O=$("#buyerAddress").val(),R=$("#buyerCity").val(),M=$("#buyerState").val(),L=$("#buyerCountry").val(),z=$("#buyerPinCode").val(),q=($("#mobile_no").val(),$("#customvar").val()),Y=$("#txnsubtype").val(),U=$("#mam").val(),V=$("#ref_url").val(),Z=$("#checksum").val(),H=$("#walletflg").val(),X=$("#wallet").val();a=w,t=T,r=P,s=I,i=N,n=D,l=A,o=S,d=F,c=B,p=j,m=O,u=R,v=M,b=L,y=z,h="upi",f=q,g=Y,_=Z,k=V,C=U,x=H,E=X,$.ajax({type:"POST",dataType:"json",url:"/upi/newindex_api.php",data:"action=qrcode&privatekey="+a+"&orderid="+t+"&transaction_id="+r+"&mercid="+l+"&amount="+s+"&isocurrency="+i+"&currency="+n+"&buyerPhone="+o+"&buyerEmail="+d+"&buyerFirstName="+c+"&buyerLastName="+p+"&buyerAddress="+m+"&buyerCity="+u+"&buyerState="+v+"&buyerCountry="+b+"&buyerPinCode="+y+"&tabselect="+h+"&customvar="+f+"&submode=barcode&txnsubtype="+g+"&checksum="+_+"&ref_url="+k+"&mam="+C+"&walletflg="+x+"&wallet="+E,success:function(e){var a=void 0!==e.error_redirection&&"yes"==e.error_redirection?"Y":"N";if("Y"==a){var t="<form action='"+e.url+"' method='post'>";return $.each(e.params,function(e,a){t+="<input type='hidden' name='"+e+"' value='"+a+"'>"}),t+="</form>",ask_worning_for_close=!1,$(t).appendTo("body").submit(),!1}var r=e.status.trim();if(200==r&&void 0!==e.method&&"sandbox"==e.method.trim())return $("#upi_form_field").html('<form action="'+e.url+'" id="upi_form" name="upi_form" method="post" ><input type="hidden" name="mid" value="'+e.mid+'" />\n                                <input type="hidden" name="mode" value="'+e.mode+'" />\n                                <input type="hidden" name="submode" value="'+e.submode+'" />\n                                <input type="hidden" name="RID" value="'+e.RID+'" />\n                                <input type="hidden" name="txnid" value="'+e.txnid+'" />\n                                </form>'),ask_worning_for_close=!1,document.forms.upi_form.submit(),!1;if(200==r){$(".qr-code").hide(),$("body").css("overflow","hidden"),$("#upi-qr-scan").fadeIn(),$(".upi-popup").css("left","0"),$(".upi-popup").css("top","0");var s=e.image.trim(),i=e.RID.trim();$("#qr_image").html('<img src="'+s+'" alt="QR Code">'),$("#RID").val(i),settimer("session_time_qr","qr"),txnCheckInt_all=setInterval(function(){check_interval_call(e.ch_id)},15e3)}else cancel_transaction(e.params.msg.trim())},error:function(){cancel_transaction("Something went wrong")}})}}),$(".qrimgbtn").click(function(){cancel_transaction()}),$(".qrimgbtnclose").click(function(){"qrimgbtn2_cross"==$(this).prop("id")?upiVpaCrossBtnFlag&&cancel_transaction():cancel_transaction()}),$("#qr-sms-pop").click(function(){var e,a,t,r,s,i,n,l,o,d,c,p,m,u,v,b,y,h,f,g,_,k,C,x=$("#privatekey").val(),E=$("#orderid").val(),w=$("#airpay_transaction_id").val(),T=$("#amount").val(),P=$("#isocurrency").val(),I=$("#currency").val(),N=$("#mercid").val(),D=$("#buyerPhone").val(),A=$("#buyerEmail").val(),S=$("#buyerFirstName").val(),F=$("#buyerLastName").val(),B=$("#buyerAddress").val(),j=$("#buyerCity").val(),O=$("#buyerState").val(),R=$("#buyerCountry").val(),M=$("#buyerPinCode").val(),L=document.getElementById("mobileno").value,z=$("#customvar").val(),q=$("#txnsubtype").val(),Y=$("#checksum").val(),U=$("#walletflg").val(),V=$("#wallet").val();return""==L?(addErrorDisplay("mobileno","upi_sms_error","Please enter mobile no."),!1):L.match(/^\d+$/)?10!=L.length?(addErrorDisplay("mobileno","upi_sms_error","Please enter only 10 digital mobile no."),!1):(e=x,a=E,t=w,r=T,s=P,i=I,n=N,l=D,o=A,d=S,c=F,p=B,m=j,u=O,v=R,b=M,y=L,h="upi",f=z,g=q,_=Y,k=U,C=V,$.ajax({type:"POST",dataType:"json",url:"/upi/newindex_api.php",data:"action=qrsms&privatekey="+e+"&orderid="+a+"&transaction_id="+t+"&mercid="+n+"&amount="+r+"&isocurrency="+s+"&currency="+i+"&buyerPhone="+l+"&buyerEmail="+o+"&buyerFirstName="+d+"&buyerLastName="+c+"&buyerAddress="+p+"&buyerCity="+m+"&buyerState="+u+"&buyerCountry="+v+"&buyerPinCode="+b+"&mobile_no="+y+"&tabselect="+h+"&customvar="+f+"&txnsubtype="+g+"&walletflg="+k+"&wallet="+C+"&checksum="+_,success:function(e){var a=e.status.trim();data2=e.RID.trim(),200==a&&$("#RID").val(data2)}}),$(".qr-code").hide(),$("#upi-mob-inst").fadeIn(),$(".upi-popup").css("left","0"),$(".upi-popup").css("top","0"),void setInterval(function(){check_interval_call()},15e3)):(addErrorDisplay("mobileno","upi_sms_error","Please enter digital mobile no."),!1)})}function check_interval_call(e){var a=$("#privatekey").val(),t=$("#orderid").val(),r=$("#airpay_transaction_id").val(),s=$("#amount").val(),i=$("#mercid").val(),n=$("#customvar").val(),l=($("#txnsubtype").val(),$("#checksum").val()),o=$("#RID").val(),d=$("#response_upi").val(),c=$("#response_manage_upi").val(),p={privatekey:a,orderid:t,transaction_id:r,mercid:i,amount:s,isocurrency:"upi",customvar:n,checksum:l,RID:o,ch_id:e};console.log("response_upi_url=="+d),$.ajax({type:"POST",dataType:"json",url:d,data:p,success:function(e){var d=e.status.trim(),p=e.msg.trim(),m=e.TRANSACTIONID.trim(),u=e.TRANSACTIONSTATUS.trim(),v=e.ap_SecureHash.trim(),b=e.SUCCESS_URL.trim();console.log("data=="+e),1==u?($("#upi_form_field").html('<form action="'+b+'" name="upi_form" id="upi_form" method="post" >\n                    <input type="hidden" name="TRANSACTIONID" value="'+t+'" />    \n                    <input type="hidden" name="APTRANSACTIONID" value="'+m+'" />\n                    <input type="hidden" name="MERCHANTID" value="'+i+'" />\n                    <input type="hidden" name="TRANSACTIONTYPE" value="320" />\n                    <input type="hidden" name="TRANSACTIONPAYMENTSTATUS" value="SUCCESS" />\n                    \n<input type="hidden" name="MESSAGE" value="'+p+'" />\n                    \n <input type="hidden" name="TRANSACTIONSTATUS" value="'+d+'" />\n                    \n<input type="hidden" name="AMOUNT" value="'+s+'" />\n                    \n<input type="hidden" name="CHMOD" value="upi" />\n                    \n<input type="hidden" name="CUSTOMVAR" value="'+n+'" />\n                    \n<input type="hidden" name="ap_SecureHash" value="'+v+'" />\n                    </form>'),ask_worning_for_close=!1,document.forms.upi_form.submit()):4==u&&($("#upi_form_field").html('<form action="'+c+'" id="upi_form" name="upi_form" method="post" ><input type="hidden" name="action" value="failed_transaction" />\n                    <input type="hidden" name="privatekey" value="'+a+'" />\n                    <input type="hidden" name="orderid" value="'+t+'" />    \n                    <input type="hidden" name="transaction_id" value="'+r+'" />\n                    <input type="hidden" name="TRANSACTIONTYPE" value="320" />\n                    <input type="hidden" name="mercid" value="'+i+'" />\n                    \n<input type="hidden" name="amount" value="'+s+'" />\n                    \n<input type="hidden" name="tabselect" value="upi" />\n                    \n<input type="hidden" name="customvar" value="'+n+'" />\n                    \n<input type="hidden" name="checksum" value="'+l+'" />\n                    \n<input type="hidden" name="RID" value="'+o+'" />\n                    </form>'),ask_worning_for_close=!1,document.forms.upi_form.submit())}})}function bindSavedCardsEvent(){$(".sign-mobile").val($("#buyerPhone").val()),$(".sign-email,#forgotUserIdCredit").val($("#buyerEmail").val()),"Y"==$("#scUserRegistered").val()&&($(".sign-up-block").remove(),$(".saved-card-block ").addClass("airpay-wallet-block")),$(".forgot-cre-back").click(function(){$("#saved-cr .forget-password").fadeOut(),$("#saved-cr .sign-in-block").fadeIn(500),$("#saved-cr .sign-up-block").fadeIn(500)}),$(".forgot-credit").click(function(){$("#saved-cr .sign-up-block").fadeOut(),$("#saved-cr .sign-in-block").fadeOut(),$("#saved-cr .forget-password").fadeIn()}),$(".cr-otp-back").click(function(){$("#saved-cr .cr-otp-login-block").fadeOut(),$("#saved-cr .sign-in-block").fadeIn(500),$("#saved-cr .sign-up-block").fadeIn(500)}),$(".dnt-cr").click(function(){$("#saved-cr .sign-up-block").fadeOut(),$("#saved-cr .sign-in-block").fadeOut(),$("#saved-cr").fadeOut(),$(".Credit-input-block").fadeIn(500),$(".Debit-input-block").fadeIn(500)}),$("#forgot-single-textCredit").click(function(){$("#saved-cr .sign-up-block").fadeOut(),$("#saved-cr .sign-in-block").fadeOut(),$("#saved-cr .forget-password").fadeIn()}),$(".forgot-single").click(function(){$(".single-click-block .sign-in-block").fadeOut(),$(".single-click-block .forget-password").fadeIn()}),$(".forgot-back-single").click(function(){$(".single-click-block .forget-password").fadeOut(),$(".single-click-block .cr-otp-login-block").fadeOut(),$(".single-click-block .sign-in-block").fadeIn(),$(".single-click-block .sign-up-block").fadeIn()}),$(".card-list-cvv").hide(),$(".frgtsubCredit").click(function(){sendForgotPasswordlink("pgcc",$("#forgotUserIdCredit").val())}),$(document).on("click",".cardlist-content",function(){var e=$(this).attr("id");$("[id^=panel]").hide(),$("#panel"+e+"-new").show(),$(this).find("input").prop("checked",!0)}),$(".air-wall-forgot").click(function(){$(".airpay-wallet-block .forget-password").fadeOut(),$(".airpay-wallet-block .sign-in-block").fadeIn()}),$(".forgot-back-air-wall").click(function(){$(".airpay-wallet-block .sign-in-block").fadeOut(),$(".airpay-wallet-block .sign-up-block").fadeOut(),$(".airpay-wallet-block .forget-password").fadeIn()}),$(".frgtsub").click(function(){var e=$("#walletForgotUser").val(),a=$("#mercid").val();""==e?$(".err-place").show():$.ajax({type:"POST",url:"/pay/consumer/consumerForgotpassdb.php",data:"email="+e+"&mercid="+a,success:function(e){200==e&&($(".left-form-single-click").fadeIn(500),$(".thnkyoustate").css("visibility","visible"),$(".forgot-pass-panel").hide()),"E"==e&&($(".err-place").show(),$(".err-place").html("Please enter Valid Email Id")),"VE"==e&&($(".err-place").show(),$(".err-place").html("Please enter Valid Email Id")),"FK"==e&&($(".err-place").show(),$(".err-place").html("Forget password key in not valid!")),"ss"==e&&($(".forget-password").hide(),$(".sign-in-block").fadeIn(500),$(".err-place").show(),$(".err-place").html("Password verification link sent to your registered email id")),"ff"==e&&(msg=e.info)}})}),$(".exp-send-otp, .cr-resend-otp").click(function(){var e=$(this).attr("id"),a=$("#mercid").val();if("exp_pay"==e)var t=$("#scuserEmail"),r="expressTab";else if("resend"==e)t=$("#otp_email");else if("resend_pgcc"==e)t=$("#otp_emailcc");else if("pgcc"==e)t=$("#SingleUser");var s=t.val();""==(s=Base64.encode(s))?showfrmError("Enter your Mobile No./E-mail Id"):(loader_show(),$.ajax({type:"POST",dataType:"json",url:"/pay/singleclickuser/generate_otp.php",data:"email="+s+"&mercid="+a,success:function(a){loader_hide();a.status.trim();if(200==a.status){var t=a.email;"pgcc"==e?($("#saved-cr .sign-up-block").fadeOut(),$("#saved-cr .sign-in-block").fadeOut()):$("#"+r).hide(),$("#otp_"+e).show(),$("#otp_"+e+" #otp_email").val(t),$(".success-block").css("display","block"),$(".success-block > p").html("OTP sent to your registered email id and to Mobile Number."),$(".success-block").delay(5e3).fadeOut("slow")}else showfrmError(a.msg)}}))})}function bindAirloanEvents(){updateKishtDetails(),$("#kissht-pay-proceed").click(function(){$(".kissht-list").show(),$(".kissht-loan").show()})}function updateKishtDetails(){$("#ks_buyerFirstName").val($("#buyerFirstName").val()),$("#ks_buyerLastName").val($("#buyerLastName").val()),$(".ks_buyerEmail").val($('[name="buyerEmail"]').val()),$(".ks_buyerPhone").val($('[name="buyerPhone"]').val())}function renderSavedCards(e){if($(".tab-saved-cards").length);else{var a=$("<div>").attr({class:"tab-saved-cards",id:"tab-saved-cards"}).css({display:"none"});$(".tab-credit_card").length?$(".tab-credit_card").append(a):$(".tab-debit_card").append(a),a.load("templates/saved-cards.html",function(){$(".saved-card-block #scLoginForm,#singleregifrm").append($(".data-input-tags").html()),bindSavedCardsEvent()})}}function updateUserName(){$('[name="fullname"]').val($("#buyerFirstName").val()+" "+$("#buyerLastName").val())}function updateCcDcUserDetails(){if(updateUserName(),"Y"==$("#scLoginFlag").val()){$(".save-details-block").show();var e="Y"==$("#scDefault").val();$("#savecardCredit,#savecardDebit").val($("#scDefault").val()).prop("checked",e).attr("checked",e)}else $(".save-details-block").hide();var a="<option>YYYY</option>"+html_cexpiry_yy,t="<option>MM</option>"+html_cexpiry_mm;$('[name="cexpiry_yy"]').html(a),$('[name="cexpiry_mm"]').html(t)}function updateNetBankDetails(){$("#nbbank_select").append(html_select_banks),$("#popular-bank-holder").html(html_radio_banks)}function updateEmiDetails(){$('[name="emifullname"]').val($("#buyerFirstName").val()+" "+$("#buyerLastName").val());var e="<option>YYYY</option>"+html_cexpiry_yy,a="<option>MM</option>"+html_cexpiry_mm;$('[name="emicexpiry_yy"]').html(e),$('[name="emicexpiry_mm"]').html(a),$("#emibank_select").append(emihtml_select_banks),$(".emi-tenure-table table").append(html_emi_tenure)}function updateWalletDetails(){$(".banks-check-block-holder").html(html_radio_ppc)}function updatePayLaterDetails(){$('.pay-later [name="FirstName"]').val($("#buyerFirstName").val()).attr("value",$("#buyerFirstName").val()),$('.pay-later [name="LastName"]').val($("#buyerLastName").val()).attr("value",$("#buyerLastName").val()),$('.pay-later [name="EmailId"]').val($('[name="buyerEmail"]').val()).attr("value",$('[name="buyerEmail"]').val()),$('.pay-later [name="MobileNo"]').val($('[name="buyerPhone"]').val()).attr("value",$('[name="buyerPhone"]').val())}function updateExpressPaymentsDetail(){"MOBILE"==$("#scUserRegisteredWith").val()?$("#scuserEmail").val($('[name="buyerPhone"]').val()):$("#scuserEmail").val($('[name="buyerEmail"]').val()),$("#btnscsubmit").on("click",function(){$("#frmErrors").hide();var e=$(".cardlist-content input:radio[name=carduniquecode]:checked").val(),a=$("#sc_cvv_"+e).val(),t="sc_cvv_"+e,r=$("#sc_cvv_"+e).data("cardissuer");return void 0===e?($("#frmErrors").show(),$("#frmErrors >p").html("Please select the card."),!1):($("#sc_cardunqspan").html(""),""==a?($("[id^=sc_cvvspan]").hide(),addErrorDisplay(t,"sc_cvvspan"+e,"Please enter CVV."),!1):/^[0-9]+$/.test(a)?"amex"!=r&&(a.length<3||a.length>3)?(addErrorDisplay(t,"sc_cvvspan"+e,"CVV should be 3 digits."),!1):"amex"==r&&a.length<=3?(addErrorDisplay(t,"sc_cvvspan"+e,"CVV should be 4 digits."),!1):($("#sc_cvvspan"+e).html(""),ask_worning_for_close=!1,!0):($("[id^=sc_cvvspan]").hide(),addErrorDisplay(t,"sc_cvvspan"+e,"Please enter the valid CVV."),!1))})}function reSendOTP(){var e=$("#privatekey").val(),a=$("#orderid").val(),t=$("#airpay_transaction_id").val(),r=$("#amount").val(),s=$("#isocurrency").val(),i=$("#currency").val(),n=$("#mercid").val(),l=$("#MobileNo").val(),o=$("#EmailId").val(),d=$("#FirstName").val(),c=$("#LastName").val(),p=$("#buyerAddress").val(),m=$("#buyerCity").val(),u=$("#buyerState").val(),v=$("#buyerCountry").val(),b=$("#buyerPinCode").val(),y=($("#mobile_no").val(),$("#customvar").val()),h=$("#txnsubtype").val(),f=$("#checksum").val(),g=($("#category").val(),$("#PanNo").val().toUpperCase()),_=$("#AdharNo").val(),k=($("#dob").val(),new Date,$("#rid").val()),C=$("#buyerEmail").val(),x=$("#buyerPhone").val(),E=$("#buyerFirstName").val(),w=$("#buyerLastName").val();loader_show(),$.ajax({type:"POST",dataType:"json",url:"/paylater/newindex_api.php",data:"action=validatePanAaadhar&privatekey="+e+"&orderid="+a+"&transactionId="+t+"&mercid="+n+"&amount="+r+"&isocurrency="+s+"&currency="+i+"&buyerPhone1="+l+"&buyerEmail1="+o+"&buyerFirstName1="+d+"&buyerLastName1="+c+"&buyerAddress="+p+"&buyerCity="+m+"&buyerState="+u+"&buyerCountry="+v+"&buyerPinCode="+b+"&mobile_no="+l+"&customvar="+y+"&txnsubtype="+h+"&checksum="+f+"&pan="+g+"&aadhar="+_+"&otp="+otp+"&divFlag="+divFlag+"&rid="+k+"&buyerPhone="+x+"&buyerEmail="+C+"&buyerFirstName="+E+"&buyerLastName="+w,success:function(e){loader_hide()}})}function cancelTransaction(){var e=$("#privatekey").val(),a=$("#orderid").val(),t=($("#airpay_transaction_id").val(),$("#amount").val()),r=$("#isocurrency").val(),s=$("#currency").val(),i=$("#mercid").val(),n=$("#MobileNo").val(),l=$("#EmailId").val(),o=$("#FirstName").val(),d=$("#LastName").val(),c=$("#buyerAddress").val(),p=$("#buyerCity").val(),m=$("#buyerState").val(),u=$("#buyerCountry").val(),v=$("#buyerPinCode").val(),b=$("#mobile_no").val(),y=$("#customvar").val(),h=$("#txnsubtype").val(),f=$("#checksum").val(),g=($("#category").val(),$("#PanNo").val().toUpperCase()),_=$("#AdharNo").val(),k=($("#dob").val(),new Date,$("#rid").val()),C=$("#buyerEmail").val(),x=$("#buyerPhone").val(),E=$("#buyerFirstName").val(),w=$("#buyerLastName").val();loader_show(),callNewIndexapi("updatefailTransaction",e,a,k,t,r,s,i,n,l,o,d,c,p,m,u,v,b,y,h,f,g,_,otp,divFlag="cancelTransaction",x,C,E,w)}function validationForCCDCEMI(e){var a=!0,t=$("#"+e+"Details").data("cardid"),r=$("#"+e+"Details").data("carderrorspan"),s=$("#"+e+"Details").data("cardnum"),i=$("#"+e+"Details").data("carderrorspanname"),n=$("#"+e+"Details").data("cardname"),l=$("#"+e+"Details").data("expirymmerr"),o=$("#"+e+"Details").data("expmmname"),d=$("#"+e+"Details").data("expyyname"),c=$("#"+e+"Details").data("cvvname"),p=$("#"+e+"Details").data("cvverror");if("emi"==e&&(emisel=$("#emibank_select").val(),"0"==emisel&&(addErrorDisplay("emibank_select","emibankspan","Please select the bank."),a=!1)),""==document.getElementById(t).value)addErrorDisplay(t,r,"Please enter card no."),a=!1;else{var m=document.getElementById(t).value,u=m.split(" ").join(""),v=get_card_type(u);if(u.length<6)addErrorDisplay(t,r,"Invalid card no."),a=!1;else{var b=/^\d+$/;if(u.match(b))if("debit"==e){if(""!=v)0==(f=match_length(u,v))?(addErrorDisplay(t,r,"Please enter valid card no."),a=!1):(document.getElementById(s)&&(document.getElementById(s).value=u),removeErrorDisplay(t,r));else!0,document.getElementById(s)&&(document.getElementById(s).value=u),removeErrorDisplay(t,r)}else{var y=v.split("_")[1];$(".card_issuer").val(y);if("credit"==e&&!0,0==(f=match_length(u,v)))addErrorDisplay(t,r,"Please enter valid card no."),a=!1;else if("emi"!=e||"AXISEMI"!=emisel&&"AMEXEMI"!=emisel&&"KOTAKEMI"!=emisel&&"HDFCEMI"!=emisel)console.log(document.getElementById(o).value+"@@@@@@@@@@@@@@@@@@@@@@@@@@@111"),document.getElementById(s)&&(document.getElementById(s).value=u),"emi"!=e&&removeErrorDisplay(t,r);else{var h=$("#emic1").val().split(" ").join("");if(""!=h&&h.length>=12)0==check_bin_range(h,emisel)?(addErrorDisplay("emic1","emicnumspan","This card is not valid for selected bank."),a=!1):document.getElementById("emicnumc").value=u}}else addErrorDisplay(t,r,"Please enter digits only."),a=!1}}if("emi"==e&&(document.emifrm.emifullname.value=trim(document.emifrm.emifullname.value)),""==trim(document.getElementById(n).value))addErrorDisplay(n,i," Please enter card holder name."),a=!1;else{b=/^[A-Za-z.\'\-????????????????????? ]*$/;(m=document.getElementById(n).value).match(b)||(addErrorDisplay(n,i,"Please enter characters only."),a=!1)}if("MM"==document.getElementById(o).value&&("CC_MAESTRO"!=v?(addErrorDisplay(o,l,"Please select exp date."),a=!1):(document.getElementById(l).style.visibility="hidden",document.getElementById(o).value="01")),"YYYY"==document.getElementById(d).value)"CC_MAESTRO"!=v?(addErrorDisplay(d,l,"Please select exp date."),a=!1):(document.getElementById(l).style.visibility="hidden",document.getElementById(d).value="35");else{m=document.getElementById(d).value;var f,g=(f=new Date).getFullYear(),_=f.getMonth(),k=g.toString().substring(2),C=parseInt(k)+20;(parseInt(m)<parseInt(k)||parseInt(m)>parseInt(C))&&(addErrorDisplay(d,l,"Please select correct date format."),a=!1),trim(k)==trim(m)&&document.getElementById("cexpiry_mm")&&document.getElementById("cexpiry_mm").value<_&&(addErrorDisplay(d,l,"Expiry date is not valid."),a=!1)}if(console.log(document.getElementById(c)),""==document.getElementById(c).value)"CC_MAESTRO"!=v?(addErrorDisplay(c,p,"Please enter CVV."),a=!1):(document.getElementById(p).style.display="none",document.getElementById(c).value="123");else{b=/^\d+$/;(m=document.getElementById(c).value).match(b)?"CC_AMEX"==v?4!=m.length&&(addErrorDisplay(c,p,"CVV should be 4 digits."),a=!1):3!=m.length&&(addErrorDisplay(c,p,"CVV should be 3 digits."),a=!1):(addErrorDisplay(c,p,"Please enter valid CVV."),a=!1)}("credit"==e&&(document.ccfrm.cvv.value=trim(document.ccfrm.cvv.value)),"emi"==e&&(document.emifrm.emicvv.value=trim(document.emifrm.emicvv.value)),"debit"==e)&&(1==a?($("#save-maindc-paygateway-submit").addClass("disable-btn"),$("#save-maindc-paygateway-submit").prop("disabled",!0),ask_worning_for_close=!1,$('input[name="savecardDebit"]').is(":checked")?($(".Credit-input-block").show(),$(".listing-panel").hide(),$(".signup-in-block").show(),$(".jsSavedCardDebit").append($(".jsWalletBlock")),showSingleClick("Debit"),a=!1):a=!0):a=!1);"credit"==e&&(1==a?($("#save-maincc-paygateway-submit").addClass("disable-btn"),$("#save-maincc-paygateway-submit").prop("disabled",!0),ask_worning_for_close=!1,$('input[name="savecardCredit"]').is(":checked")?($(".Debit-input-block").show(),$(".listing-panel").hide(),$(".signup-in-block").show(),$(".jsSavedCardCredit").append($(".jsWalletBlock")),showSingleClick("Credit"),a=!1):a=!0):a=!1);"emi"==e&&1==a&&($("#emi-submit").addClass("disable-btn"),$("#emi-submit").prop("disabled",!0),ask_worning_for_close=!1);$("#mercid").val();return a&&pageversion&&"v_popup"==pageversion&&(payIndexPg_popup(e),a=!1),a?$(".paygateway-submit").attr("disabled",!0):$(".paygateway-submit").attr("disabled",!1),a}function validateCashForm(){var e=!0;if(""==document.getElementById("cash_mobnumber").value)addErrorDisplay("cash_mobnumber","cashmobspan","Please enter mobile number."),e=!1;else{pvalue=document.getElementById("cash_mobnumber").value;var a=/^\d+$/;pvalue.match(a)||(addErrorDisplay("cash_mobnumber","cashmobspan","Please enter digits only."),e=!1),a="[0-9]{10}",pvalue.match(a)||(addErrorDisplay("cash_mobnumber","cashmobspan","Please enter a valid mobile number."),e=!1)}if(""==document.getElementById("cash_pincode").value)addErrorDisplay("cash_pincode","cashpincodespan","Please enter pincode."),e=!1;else{pvalue=document.getElementById("cash_pincode").value;a=/^\d+$/;pvalue.match(a)?6!=pvalue.length&&(addErrorDisplay("cash_pincode","cashpincodespan","Pincode should be 6 digits only."),e=!1):(addErrorDisplay("cash_pincode","cashpincodespan","Please enter digits only."),e=!1)}return 1==e&&($("#payment").addClass("disable-btn"),$("#payment").prop("disabled",!0),ask_worning_for_close=!1),e}function validateRTGSForm(){var e=!0;if(""==document.getElementById("utr").value)addErrorDisplay("utr","utrspan","Please enter UTR Number"),e=!1;else{pvalue=document.getElementById("utr").value;pvalue.match(/^[A-Za-z0-9 ]*$/)||(addErrorDisplay("utr","utrspan","Please enter alphanumeric value only."),e=!1),(pvalue.length<16||pvalue.length>22)&&(addErrorDisplay("utr","utrspan","Please lengthen this text to 16 characters or more (you are currently using "+pvalue.length+" character)."),e=!1)}return 1==e&&($("#rtgs-submit").addClass("disable-btn"),$("#rtgs-submit").prop("disabled",!0),ask_worning_for_close=!1),e}function postRedirectUrl(e,a){var t=document.createElement("form");for(var r in t.setAttribute("method","post"),t.setAttribute("action",e),a)if(a.hasOwnProperty(r)){var s=document.createElement("input");s.setAttribute("type","hidden"),s.setAttribute("name",r),s.setAttribute("value",a[r]),t.appendChild(s)}document.body.appendChild(t),t.submit()}function mobileTabsDisable(){$(".payment-tabs-container .r-tabs-accordion-title").addClass("r-tabs-state-disabled").removeClass("r-tabs-state-default r-tabs-state-active")}function mobileTabsEnable(){$(".payment-tabs-container .r-tabs-accordion-title").removeClass("r-tabs-state-disabled").addClass("r-tabs-state-default")}function freez(e){var a=$("#tab_menu_list .r-tabs-state-active a").attr("id");isMobileCheck()&&(mobileTabsDisable(),$('[href="#tab-'+a+'"]').parents(".r-tabs-accordion-title").addClass("r-tabs-state-default r-tabs-state-active").removeClass("r-tabs-state-disabled")),renderSelectedTabMethod(a),$("#offer-respo-tab").responsiveTabs("disable",0),$("#offer-respo-tab").responsiveTabs("disable",1),$("#offer-respo-tab").responsiveTabs("disable",2),$("#offer-respo-tab").responsiveTabs("disable",3),$("#offer-respo-tab *").prop("disabled",!0),$("#offer-respo-tab div").addClass("disabled-block"),"debit"!=e&&"credit"!=e||($("input[name=cnumtxt]").prop("disabled",!0),$("input[name=cnumtxt]").addClass("readonly-input")),"netbnk"==e&&($("#popularBanks *").prop("disabled",!0),$("#popularBanks").addClass("disabled-block"),$(".all-banks-dropdown*").prop("disabled",!0),$(".all-banks-dropdown").addClass("disabled-block"))}function bindBharatQrEvents(){$("#pay-bharatqr").on("click",function(){loader_show();var e=$(this);if(!e.data("clicked")){e.data("clicked",!0);var a=$("#privatekey").val(),t=$("#orderid").val(),r=$("#airpay_transaction_id").val(),s=$("#amount").val(),i=$("#isocurrency").val(),n=$("#currency").val(),l=$("#mercid").val(),o=$("#buyerPhone").val(),d=$("#buyerEmail").val(),c=$("#buyerFirstName").val(),p=$("#buyerLastName").val(),m=$("#buyerAddress").val(),u=$("#buyerCity").val(),v=$("#buyerState").val(),b=$("#buyerCountry").val(),y=$("#buyerPinCode").val(),h=$("#mobile_no").val(),f=$("#tabselect").val(),g=$("#customvar").val(),_=$("#txnsubtype").val(),k=$("#mam").val(),C=$("#ref_url").val();get_bharatqrcode(a,t,r,s,i,n,l,o,d,c,p,m,u,v,b,y,h,f,g,_,$("#checksum").val(),C,k)}}),$(".cls-bhpopup").click(function(){$("#bhpopup").fadeOut(),loader_show();cancel_bharatqrtransaction("User cancel transaction","cancel_transaction")})}function get_bharatqrcode(e,a,t,r,s,i,n,l,o,d,c,p,m,u,v,b,y,h,f,g,_,k,C){$.ajax({type:"POST",dataType:"json",url:"/bharatqr/newindex_api.php",data:"action=qrcode&privatekey="+e+"&orderid="+a+"&transaction_id="+t+"&mercid="+n+"&amount="+r+"&isocurrency="+s+"&currency="+i+"&buyerPhone="+l+"&buyerEmail="+o+"&buyerFirstName="+d+"&buyerLastName="+c+"&buyerAddress="+p+"&buyerCity="+m+"&buyerState="+u+"&buyerCountry="+v+"&buyerPinCode="+b+"&tabselect="+h+"&customvar="+f+"&submode=barcode&txnsubtype="+g+"&checksum="+_+"&ref_url="+k+"&mam="+C,success:function(e){if(loader_hide(),"Y"==(void 0!==e.error_redirection&&"yes"==e.error_redirection?"Y":"N")){var a="<form action='"+e.url+"' method='post'>";return $.each(e.params,function(e,t){a+="<input type='hidden' name='"+e+"' value='"+t+"'>"}),a+="</form>",ask_worning_for_close=!1,$(a).appendTo("body").submit(),!1}var t=e.status;if(200==t&&void 0!==e.method&&"sandbox"==e.method.trim())return $("#bharatqr_form_field").html('<form action="'+e.url+'" id="bharatQR_form" name="bharatQR_form" method="post" ><input type="hidden" name="mid" value="'+e.mid+'" />\n                            <input type="hidden" name="mode" value="'+e.mode+'" />\n                            <input type="hidden" name="submode" value="'+e.submode+'" />\n                            <input type="hidden" name="RID" value="'+e.RID+'" />\n                            <input type="hidden" name="txnid" value="'+e.txnid+'" />\n                            </form>'),ask_worning_for_close=!1,document.forms.bharatQR_form.submit(),!1;if(200==t){$(".bharat-code").hide(),$("body").css("overflow","hidden"),$("#bhpopup").fadeIn();var r=e.image.trim();$("#RID").val(e.RID);$("#RID").val();$("#TXNID").val(e.TXNID);$("#TXNID").val();$("#response_manage_bharatqr").val(e.url),$("#response_bharatqr").val(e.HANDLER),jQuery("#bharatqr_img").qrcode({text:r,width:150,height:150}),settimerBharatqr("session_time_bharatqr","qr"),txnCheckInt_all=setInterval(function(){check_interval_call_bharatqr()},15e3)}else cancel_bharatqrtransaction(e.params.msg.trim())}})}function settimerBharatqr(e,a){startTimerBharatqr(60*$("#"+e).attr("rel"),document.querySelector("#"+e),a)}function startTimerBharatqr(e,a,t){var r,s,i=e,n=setInterval(function(){if(r=parseInt(i/60,10),s=(s=parseInt(i%60,10))<10?"0"+s:s,(r=r<10?"0"+r:r)<=0&&s<=0){a.innerHTML="Session Timeout!",clearInterval(n),loader_show();return cancel_bharatqrtransaction("Session timed out","cancel_transaction"),!1}a.innerHTML="Session timeout in <span>"+r+":"+s+"</span> minutes!",--i<0&&(i=0)},1e3)}function cancel_bharatqrtransaction(e,a){void 0===e&&(e="");var t=$("#mercid").val(),r=($("#tabselectupi").val(),$("#RID").val()),s=$("#TXNID").val(),i=$("#response_bharatqr").val();$("#bharatqr_form_field").html('<form action="'+i+'" id="bharatqr_form" name="bharatqr_form" method="post" ><input type="hidden" name="action" value="'+a+'" /><input type="hidden" name="BANK_RESPONSE" value="'+e+'" /><input type="hidden" name="mercid" value="'+t+'" /><input type="hidden" name="RID" value="'+r+'" /><input type="hidden" name="TXNID" value="'+s+'" /><input type="hidden" name="redirection" value="RESPONSE_MANAGE_BHARATQR" /></form>'),$(".cancel_transaction").addClass("disable-btn"),ask_worning_for_close=!1,document.forms.bharatqr_form.submit()}function check_interval_call_bharatqr(){var e={mercid:$("#mercid").val(),RID:$("#RID").val(),TXNID:$("#TXNID").val(),REDIRECTION:$("#response_manage_bharatqr").val()};$.ajax({type:"POST",dataType:"json",url:"/bharatqr/bridge.php",data:e,success:function(e){1==e?(flag="success_transaction",cancelReason="",cancel_bharatqrtransaction(cancelReason,flag)):4==e&&(flag="fail_transaction",cancelReason="",cancel_bharatqrtransaction(cancelReason,flag))}})}function createInlineVersionModal(e,a,t){var r=$("<div>").attr({class:"popup","data-popup":"popup-1"}),s=$("<div>").attr({class:"popup-inner r-tabs-panel"}),i=$("<a>").attr({class:"popup-close inline-popup-close",href:"#","data-popup-close":"popup-1"}).html("x"),n=$("<div>").attr({class:"wrap"}),l=$("<iframe>").attr({src:e,class:"inline-popup-iframe"});n.append(l),s.append(i).append(n),r.append(s),$("body").append(r),$(".inline-popup-close").on("click",$.proxy(function(e){var a=$("#mercid").val(),r=e.RID,s=$(".r-tabs-state-active #amount").val(),i=$("#airpay_transaction_id").val(),n=(e.requesturl,$("#privatekey").val()),l=$(".r-tabs-state-active #orderid").val(),o=$(".r-tabs-state-active #buyerFirstName").val(),d=$(".r-tabs-state-active #buyerLastName").val(),c=$(".r-tabs-state-active #buyerPhone").val(),p=$('[name="currency"]').val(),m=$(".r-tabs-state-active #customvar").val(),u=$("<div>").attr({class:"popup_form_field",id:"popup_form_field"});$("body").append(u),$("#popup_form_field").html('<form action="../pay/popup_cancel.php" id="popupFrm" name="popupFrm" method="post" ><input type="hidden" name="action" value="cancel_transaction" /><input type="hidden" name="BANK_RESPONSE" value="User Cancelled Transaction" /><input type="hidden" name="mercid" value="'+a+'" /><input type="hidden" name="RID" value="'+r+'" /><input type="hidden" name="TXNID" value="'+i+'" /><input type="hidden" name="orderid" value="'+l+'" /><input type="hidden" name="privatekey" value="'+n+'" /><input type="hidden" name="AMOUNT" value="'+s+'" /><input type="hidden" name="channel" value="'+t+'" /><input type="hidden" name="fname" value="'+o+'" /><input type="hidden" name="lname" value="'+d+'" /><input type="hidden" name="email" value="" /><input type="hidden" name="phone" value="'+c+'" /><input type="hidden" name="currency" value="'+p+'" /><input type="hidden" name="customVar" value="'+m+'" /></form>'),$("body").css("overflow","auto"),$("#popupFrm").submit()},this,a))}window.onbeforeunload=null,window.modalCallback=function(e,a){postRedirectUrl(e,a),clearInterval(closeWinIterval)};var winInst,ask_worning_for_close=!0;function amexOnclick(){return $("#amex-submit").attr("disabled","true"),$("#amex-submit").addClass("disable-btn"),ask_worning_for_close=!1,!0}function upi_check(){}function payIndexPg_popup(e){var a,t,r=$("#privatekey").val(),s=$("#checksum").val(),i=$("#mercid").val(),n=$(".r-tabs-state-active #buyerEmail").val(),l=$(".r-tabs-state-active #buyerPhone").val(),o=$(".r-tabs-state-active #buyerPinCode").val(),d=$(".r-tabs-state-active #buyerFirstName").val(),c=$(".r-tabs-state-active #buyerLastName").val(),p=$(".r-tabs-state-active #buyerAddress").val(),m=$(".r-tabs-state-active #buyerCity").val(),u=$(".r-tabs-state-active #buyerState").val(),v=$(".r-tabs-state-active #buyerCountry").val(),b=$(".r-tabs-state-active #amount").val(),y=$(".r-tabs-state-active #orderid").val(),h=$('[name="currency"]').val(),f=$(".r-tabs-state-active #isocurrency").val(),g=$(".r-tabs-state-active #savecardCredit").val(),_=$(".r-tabs-state-active #card_issuer").val(),k=$(".r-tabs-state-active #tabselect").val(),C=$(".js_card_num:visible").val()||$(".r-tabs-state-active #cnumc").val(),x=$('.r-tabs-state-active:visible [name="cnum"]').val()||$('.r-tabs-state-active:visible [name="emicnum"]').val(),E=$('.r-tabs-state-active:visible [name="cnum"]').val()||$('.r-tabs-state-active:visible [name="emicnum"]').val(),w=$('.r-tabs-state-active:visible [name="fullname"]').val()||$('.r-tabs-state-active:visible [name="emifullname"]').val(),T=$('.r-tabs-state-active:visible [name="cexpiry_mm"]').val()||$('.r-tabs-state-active:visible [name="emicexpiry_mm"]').val(),P=$('.r-tabs-state-active:visible [name="cexpiry_yy"]').val()||$('.r-tabs-state-active:visible [name="emicexpiry_yy"]').val(),I=$(".r-tabs-state-active #customvar").val(),N=$(".r-tabs-state-active #txnsubtype").val(),D=$('.r-tabs-state-active form:visible [name="cvv"]').val()||$(".cvc:visible").val()||$("#lgnsc_cvv").val(),A=s,S=$('.r-tabs-state-active [name="chmod"]').val(),F=$('.r-tabs-state-active [name="consumercardid"]').val(),B=$('.r-tabs-state-active [name="selcampaignid"]').val(),j=$('.r-tabs-state-active [name="campaigncoupon"]').val(),O=$('.r-tabs-state-active [name="campaign_nb"]').val(),R=$('.r-tabs-state-active [name="campaign_final_submit"]').val(),M=$("#airpay_transaction_id").val(),L="privatekey="+r+"&orderid="+y+"&savecardCredit="+g+"&mercid="+i+"&amount="+b+"&isocurrency="+f+"&currency="+h+"&buyerPhone="+l+"&buyerEmail="+n+"&buyerFirstName="+d+"&buyerLastName="+c+"&buyerAddress="+p+"&buyerCity="+m+"&buyerState="+u+"&buyerCountry="+v+"&buyerPinCode="+o+"&tabselect="+k+"&customvar="+I+"&submode=barcode&txnsubtype="+N+"&checksum="+s+"&card_issuer="+_+"&cnumtxt="+C+"&tokennum="+A+"&pageversion="+pageversion+"&chmod="+S+"&consumercardid="+F+"&selcampaignid="+B+"&campaigncoupon="+j+"&campaign_nb="+O+"&campaign_final_submit="+R+"&airpay_transaction_id="+M;"emi"==e?(t="&action=emi&emicnum="+E+"&emicnumc="+x+"&emifullname="+w+"&emicexpiry_mm="+T+"&emicexpiry_yy="+P+"&emicvv="+D+"&emibank_select="+$("#emibank_select").val()+"&emitenure="+$('[name="emitenure"]').val()+"&mer_dom="+$(".r-tabs-state-active #mer_dom").val(),a="/emi/newindex_api_ajax.php"):(t="&action=pg&cnum="+E+"&cnumc="+x+"&fullname="+w+"&cexpiry_mm="+T+"&cexpiry_yy="+P+"&cvv="+D,a="/paymentg/newindex_api_ajax.php");L+=t,$(".tab-loader").addClass("sub-loader").show(),$('[type="submit"]').addClass("disable-btn").prop("disable",!0),$.ajax({type:"POST",dataType:"json",url:a,data:L,success:function(a){$("#overlay").hide(),""==a.errorMsg?createInlineVersionModal(a.redirect,a,e):($(".tab-loader").removeClass("sub-loader").hide(),$(".error-block p").html(a.errorMsg),$(".error-block").show(),$('[type="submit"]').removeClass("disable-btn").prop("disable",!1),setTimeout(function(){$(".error-block p").html(""),$(".error-block").hide()},1e4))},error:function(e,a,t){$(".tab-loader").hide(),console.log(a,t),$("#overlay").hide()}})}function validateDCForm(){var e=!0,a=document.getElementById("c3").value,t=a.split(" ").join("");if(""==document.getElementById("c3").value)addErrorDisplay("c3","c3cnumspan","Please enter card no."),e=!1;else{if(!(t.length>=6))return addErrorDisplay("c3","c3cnumspan","Invalid card no."),!1;var r=get_card_type(t),s=/^\d+$/;if(t.match(s)){Mod10(t);if(void 0===r)addErrorDisplay("c3","c3cnumspan","Invalid card no."),e=!1;else if(""!=r)0==(n=match_length(t,r))?(addErrorDisplay("c3","c3cnumspan","Card no. should be valid digits"),e=!1):(document.getElementById("cnumd")&&(document.getElementById("cnumd").value=t),removeErrorDisplay("c3","c3cnumspan"));else!0,document.getElementById("cnumd")&&(document.getElementById("cnumd").value=t),removeErrorDisplay("c3","c3cnumspan")}else addErrorDisplay("c3","c3cnumspan","Please enter digits only."),e=!1}if(""==trim(document.getElementById("c4").value))addErrorDisplay("c4","c4fullnamespan","Please enter full name."),e=!1;else{s=/^[A-Za-z\'\-???? ]*$/;(a=document.getElementById("c4").value).match(s)||(addErrorDisplay("c4","c4fullnamespan","Please enter characters only."),e=!1)}if("MM"==document.getElementById("d_cexpiry_mm").value&&"CC_MAESTRO"!=r?(addErrorDisplay("d_cexpiry_mm","d_cexpiry_yyspan","Please select date."),e=!1):"CC_MAESTRO"==r?(document.getElementById("d_cexpiry_yyspan").style.visibility="hidden",document.getElementById("d_cexpiry_mm").value="01"):(a=document.getElementById("d_cexpiry_mm").value,parseInt(a)<parseInt(1)||(parseInt(a),parseInt(12))),"YYYY"==document.getElementById("d_cexpiry_yy").value&&"CC_MAESTRO"!=r)addErrorDisplay("d_cexpiry_yy","d_cexpiry_yyspan","Please select date."),e=!1;else if("CC_MAESTRO"==r)document.getElementById("d_cexpiry_yyspan").style.visibility="hidden",document.getElementById("d_cexpiry_yy").value="35";else{a=document.getElementById("d_cexpiry_yy").value;var n,l=(n=new Date).getFullYear(),o=n.getMonth(),d=l.toString().substring(2),c=parseInt(d)+20;(parseInt(a)<parseInt(d)||parseInt(a)>parseInt(c))&&(addErrorDisplay("d_cexpiry_yy","d_cexpiry_yyspan","Please select correct date format."),e=!1),trim(d)==trim(a)&&document.getElementById("d_cexpiry_mm").value<o&&(addErrorDisplay("d_cexpiry_yy","d_cexpiry_yyspan","Expiry date is not valid"),e=!1)}if(""==document.getElementById("d_cvv").value&&"CC_MAESTRO"!=r&&"CC_MAESTRO"!=r)addErrorDisplay("d_cvv","d_cvvspan","Please enter CVV."),e=!1;else{if(!(t.length>=6))return!1;if(void 0===(r=get_card_type(t)))e=!1;else if("CC_MAESTRO"!=r&&"CC_MAESTRO"!=r)if(""==document.getElementById("d_cvv").value)addErrorDisplay("d_cvv","d_cvvspan","Please enter CVV."),e=!1;else{s=/^\d+$/;(a=document.getElementById("d_cvv").value).match(s)?"CC_MASTERCARD"!=r&&"CC_VISA"!=r||3==a.length||(addErrorDisplay("d_cvv","d_cvvspan","CVV should be 3 digits."),e=!1):(addErrorDisplay("d_cvv","d_cvvspan","Please enter digits only."),e=!1)}else document.getElementById("d_cvvspan").style.display="none",document.getElementById("d_cvv").value="123"}if(1==e){var p=getElementsByClassName(document.body,"paygateway-submit");for(i=0;i<p.length;i++)p[i].disabled=!0;ask_worning_for_close=!1}else{p=getElementsByClassName(document.body,"paygateway-submit");for(i=0;i<p.length;i++)p[i].disabled=!1}return e}function changecolor(e,a){document.getElementById(e).style.borderColor="",document.getElementById(a).style.display="none",removeErrorDisplay(e,a)}function trim(e){if(null==e)return e;for(var a=0,t=e.length-1;a<e.length&&" "==e[a];)a++;for(;t>a&&" "==e[t];)t-=1;return e.substring(a,t+1)}function validateNBForm(){var e=!0;if("0"==$("#nbbank_select option:selected").val()&&(addErrorDisplay("nbbank_select","nbbank_selectspan","Please select the bank."),e=!1),1==e)return $("#nb_submit").addClass("disable-btn"),$("#nb_submit").prop("disabled",!0),ask_worning_for_close=!1,!0;var a=document.getElementsByClassName("btnPayment");for(i=0;i<a.length;i++)a[i].disabled=!1;return e}function validatePPForm(){$("#ppc_submit").addClass("disable-btn"),$("#ppc_submit").prop("disabled","disabled");var e=!0;return $("input:radio[name=prepaid_radio]:checked").val()||($("#prepaid_radiospan").show(),$("#prepaid_radiospan").html("Please select prepaid plan."),e=!1),!0===e?($("#ppc_submit").addClass("disable-btn"),$("#ppc_submit").prop("disabled",!0),ask_worning_for_close=!1,!0):($("#ppc_submit").removeClass("disable-btn"),$("#ppc_submit").prop("disabled",!1),!1)}function isOneChecked(){for(var e=document.getElementsByTagName("input"),a=0;a<e.length;a++)if("radio"==e[a].type&&e[a].checked)return!0;return!1}function validateIMPSForm(){var e=!0;if(""==document.getElementById("imps_mobile_no").value||"91"==document.getElementById("imps_mobile_no").value)addErrorDisplay("imps_mobile_no","custmobspan","Please enter mobile no."),e=!1;else{pvalue=document.getElementById("imps_mobile_no").value;var a=/^\d+$/;pvalue.match(a)||(addErrorDisplay("imps_mobile_no","custmobspan","Please enter digital only."),e=!1)}if(""==document.getElementById("imps_mmid").value)addErrorDisplay("imps_mmid","custmmidspan","Please enter mmid."),e=!1;else{pvalue=document.getElementById("imps_mmid").value;a=/^\d+$/;pvalue.match(a)||(addErrorDisplay("imps_mmid","custmmidspan","Please enter digital only."),e=!1)}if(""==document.getElementById("imps_otp").value)addErrorDisplay("imps_otp","custotpspan","Please enter otp."),e=!1;else{pvalue=document.getElementById("imps_otp").value;a=/^\d+$/;pvalue.match(a)||(addErrorDisplay("imps_otp","custotpspan","Please enter digital only."),e=!1)}return 1==e&&($("#imps-submit").addClass("disable-btn"),$("#imps-submit").prop("disabled",!0),ask_worning_for_close=!1),e}function validatePaylater(){var e=!0;return $("#pay-proceed").click(function(){var a=$("#EmailId").val(),t=$("#MobileNo").val(),r=$("#FirstName").val(),s=$("#LastName").val();if(""==a)$("#EmailId").next(".error-msg").addClass("display").html("Please enter email."),e=!1;else{pvalue=a;var i=/^[_\.0-9a-zA-Z-]+@([0-9a-zA-Z][0-9a-zA-Z-]+\.)+[a-zA-Z]{2,6}$/i;pvalue.match(i)?$("#EmailId").next(".error-msg").removeClass("display"):($("#EmailId").next(".error-msg").addClass("display").html("Please enter valid email."),e=!1)}if(""==t)$("#MobileNo").next(".error-msg").addClass("display").html("Please enter phone no."),e=!1;else{pvalue=t;i="[0-9]{10}";pvalue.match(i)?$("#MobileNo").next(".error-msg").removeClass("display"):($("#MobileNo").next(".error-msg").addClass("display").html("Please enter valid mobile no."),e=!1)}if(""==r)$("#FirstName").next(".error-msg").addClass("display").html("Please enter first name."),e=!1;else{pvalue=r;i="^[a-zA-Z]+$";pvalue.match(i)?$("#FirstName").next(".error-msg").removeClass("display"):($("#FirstName").next(".error-msg").addClass("display").html("Please enter valid first name."),e=!1)}if(""==s)$("#LastName").next(".error-msg").addClass("display").html("Please enter first last name."),e=!1;else{pvalue=s;i="^[a-zA-Z]+$";pvalue.match(i)?$("#LastName").next(".error-msg").removeClass("display"):($("#LastName").next(".error-msg").addClass("display").html("Please enter valid last name."),e=!1)}$("#pay-details").hide(),$("#pay-otp").fadeIn()}),$(".cr-otp-back").click(function(){$("#pay-otp").hide(),$("#tab-12").css("position","static"),$("#pay-details").fadeIn()}),$("#otp-proceed").click(function(){var a=$("#AdharNo").val(),t=$("#PanNo").val();if(""==a)$("#AdharNo").next(".error-msg").addClass("display").html("Please enter adhar no."),e=!1;else{pvalue=a;var r="[0-9]{12}";pvalue.match(r)?$("#AdharNo").next(".error-msg").removeClass("display"):($("#AdharNo").next(".error-msg").addClass("display").html("Please enter valid adhar no."),e=!1)}if(""==t)$("#PanNo").next(".error-msg").addClass("display").html("Please enter adhar no."),e=!1;else{pvalue=t;r=/^([A-Z]{5})([0-9]{4})([A-Z]{1})$/;pvalue.match(r)?$("#PanNo").next(".error-msg").removeClass("display"):($("#PanNo").next(".error-msg").addClass("display").html("Please enter valid adhar no."),e=!1)}}),$("#PanNo").keyup(function(){$("#PanNo").val($("#PanNo").val().toUpperCase())}),e}function validateEMICCForm(){var e=!0;if(emisel=$("#emibank_select").val(),"0"==emisel&&(addErrorDisplay("emibank_select","emibankspan","Please select the bank."),e=!1),""==document.getElementById("emic1").value)addErrorDisplay("emic1","emicnumspan","Please enter card no."),e=!1;else{pvalue=document.getElementById("emic1").value;var a=pvalue.split(" ").join(""),t=/^\d+$/;if(a.match(t)){var r=GetCardType(a);Mod10(a);if(void 0===r)addErrorDisplay("emic1","emicnumspan","Invalid card no."),e=!1;else{var s,i=r.split("~"),n=i[0],l=i[1];if($(".card_issuer").val(n),"Visa"==n?s=new RegExp("^4"):"MasterCard"==n&&(s=new RegExp("^5[1-5]")),null!=a.match(s))if(a.length!=l)addErrorDisplay("emic1","emicnumspan","Card no. should be "+l+" digits"),e=!1;else if("AXISEMI"==emisel||"AMEXEMI"==emisel||"KOTAKEMI"==emisel||"HDFCEMI"==emisel){var o=$("#emic1").val().split(" ").join("");if(""!=o&&o.length>=12)0==check_bin_range(o,emisel)?(addErrorDisplay("emic1","emicnumspan","This card is not valid for selected bank."),e=!1):document.getElementById("emicnumc").value=a}else document.getElementById("emicnumc").value=a}}else addErrorDisplay("emic1","emicnumspan","Please enter digits only."),e=!1}if(document.emifrm.emifullname.value=trim(document.emifrm.emifullname.value),""==trim(document.getElementById("emic2").value))addErrorDisplay("emic2","emifullnamespan","Please enter card holder name."),e=!1;else{pvalue=document.getElementById("emic2").value;t=/^[A-Za-z\'\-????????????????????? ]*$/;pvalue.match(t)||(addErrorDisplay("emic2","emifullnamespan","Please enter characters only."),e=!1)}if("MM"==document.getElementById("emicexpiry_mm").value?(addErrorDisplay("emicexpiry_mm","emicexpiry_yyspan","Please select expiry date."),e=!1):(pvalue=document.getElementById("emicexpiry_mm").value,parseInt(pvalue)<parseInt(1)||(parseInt(pvalue),parseInt(12))),"YYYY"==document.getElementById("emicexpiry_yy").value)addErrorDisplay("emicexpiry_yy","emicexpiry_yyspan","Please select expiry date."),e=!1;else{pvalue=document.getElementById("emicexpiry_yy").value;var d=new Date,c=d.getFullYear(),p=d.getMonth(),m=c.toString().substring(2),u=parseInt(m)+20;(parseInt(pvalue)<parseInt(m)||parseInt(pvalue)>parseInt(u))&&(addErrorDisplay("emicexpiry_yy","emicexpiry_yyspan","Please select correct date format."),e=!1),trim(m)==trim(pvalue)&&document.getElementById("emicexpiry_mm").value<p&&(addErrorDisplay("emicexpiry_yy","emicexpiry_yyspan","Expiry date is not valid."),e=!1)}if(document.emifrm.emicvv.value=trim(document.emifrm.emicvv.value),""==document.getElementById("emicvv").value)addErrorDisplay("emicvv","emicvvspan","Please enter cvv."),e=!1;else{pvalue=document.getElementById("emicvv").value;t=/^\d+$/;pvalue.match(t)?"AMEXEMI"==emisel?4!=pvalue.length&&(addErrorDisplay("emicvv","emicvvspan","Cvv should be 4 digits."),e=!1):3!=pvalue.length&&(addErrorDisplay("emicvv","emicvvspan","Cvv should be 3 digits."),e=!1):(addErrorDisplay("emicvv","emicvvspan","Please enter digits only."),e=!1)}return""==document.getElementById("emibank_select").value&&(addErrorDisplay("emibank_select","emibankspan","Please select the bank."),e=!1),1==e&&($("#emi-submit").addClass("disable-btn"),$("#emi-submit").prop("disabled",!0),ask_worning_for_close=!1),e}function validateWalletForm(){if(""==document.getElementById("walletmobileNo").value)return addErrorDisplay("walletmobileNo","walletmobspan","Please enter mobile no."),!1;pvalue=document.getElementById("walletmobileNo").value;var e=/^\d+$/;if(!pvalue.match(e))return addErrorDisplay("walletmobileNo","walletmobspan","Please enter digital only."),!1;if(""==document.getElementById("walletemail").value)return addErrorDisplay("walletemail","walletemailspan","Please enter email."),!1;pvalue=document.getElementById("walletemail").value;e=/^[_\.0-9a-zA-Z-]+@([0-9a-zA-Z][0-9a-zA-Z-]+\.)+[a-zA-Z]{2,6}$/i;if(!pvalue.match(e))return addErrorDisplay("walletemail","walletemailspan","Please enter valid email address."),!1;if(""==document.getElementById("walletpassword").value)return addErrorDisplay("walletpassword","walletpwdspan","Please enter password."),!1;pvalue=document.getElementById("walletpassword").value;e=/^[a-z0-9A-Z]*$/;return pvalue.match(e)?""==document.getElementById("walletrepassword").value?(addErrorDisplay("walletrepassword","walletrpwdspan","Please re-enter your Password."),!1):(pvalue=document.getElementById("walletrepassword").value,pvalue.match(e)?pvalue!=document.getElementById("walletpassword").value?(addErrorDisplay("walletpassword","walletrpwdspan","Re-enter password does not matches."),!1):($("#ppc_submit").addClass("disable-btn"),$("#ppc_submit").prop("disabled",!0),ask_worning_for_close=!1,!0):(addErrorDisplay("walletpassword","walletrpwdspan","Please enter valid re-enter your password."),!1)):(addErrorDisplay("walletpassword","walletpwdspan","Please enter valid password."),!1)}function GetCardType(e){if(null!=e){var a=new RegExp("^4");if(null!=e.match(a))return"Visa~16";if(document.ccfrm.amexvalidation&&"Y"==document.ccfrm.amexvalidation.value&&(a=new RegExp("^(34|37)"),null!=e.match(a)))return"American Express~15";if(a=new RegExp("^5[1-5]"),null!=e.match(a))return"MasterCard~16";if(a=new RegExp("^6011"),null!=e.match(a))return"Discover~16";if(a=new RegExp("^(6082|5085|5086|5087|5088|5089|6069|607|6080|6081|6083|6084|6085|6521|6522|6523|6524|6525|6526|6527|6528|6530|6531)"),null!=e.match(a))return"Rupay~16";if(a=new RegExp("^(5010|5011|5012|5013|5014|5015|5016|5017|5018|502|503|504|505|506|507|508|6012|6013|6014|6015|6016|6017|6018|6019|602|603|604|605|6060|677|675|674|673|672|671|670|6760|6761|6762|6763|6764|6765|6766|6768|6769|581|600|622)"),null!=e.match(a))return"Maestro~16";if(a=new RegExp("^300|302|303|304|305|36|38"),null!=e.match(a))return"Diners~14";if(a=new RegExp("^3|1800|2131"),null!=e.match(a))return"JCB~16"}}function get_card_type(e){var a=match_prefix(e=e.replace(/ /g,""));if(0!=a)return a}function match_prefix(e){var a;for(var t in a={CC_AMEX:[34,37],CC_DINERSCLUB:[300,301,302,303,304,305,36,38],CC_DISCOVER:[6011],CC_JCB:[3,1800,2131],CC_MASTERCARD:[51,52,53,54,55],CC_VISA:[4],CC_RUPAY:[5085,5086,5087,5088,5089,6061,6062,6063,6064,6065,6066,6067,6068,6069,607,6080,6081,6082,6083,6084,6085,65215,6522,6523,6524,6525,6526,6527,6528,6530,6531,6521],CC_MAESTRO:[622018,600206,504435,504775,504645,603845,504809,504993,504774,502165,502260,504433,504434,504437,504681,504753,504817,504834,504848,504884,504973,508125,508126,508159,603123,603741,5010,5011,5012,5013,5014,5015,5016,5017,5018,502,503,504,505,506,507,508,6012,6013,6014,6015,6016,6017,6018,6019,602,603,604,605,6060,677,675,674,673,672,671,670,6760,6761,6762,6763,6764,6765,6766,6768,6769,581,600,622]})for(var r in a[t]){var s=a[t][r];if(e.substring(0,s.toString().length)==s)return t}return"CC_UNKNOWN"}function match_length(e,a){var t;t={CC_AMEX:[15],CC_DINERSCLUB:[14],CC_DISCOVER:[16],CC_JB:[15,16],CC_MASTERCARD:[16],CC_VISA:[13,16],CC_RUPAY:[16],CC_MAESTRO:[12,13,14,15,16,17,18,19],CC_MAESTRO:[12,13,14,15,16,17,18,19],CC_UNKNOWN:[12,13,14,15,16,17,18,19]};var r=e.length;for(var s in t)for(var i in t[s])if(t[a][i]==r)return a;return!1}function getElementsByClassName(e,a){for(var t=[],r=new RegExp("(^| )"+a+"( |$)"),s=e.getElementsByTagName("*"),i=0,n=s.length;i<n;i++)r.test(s[i].className)&&t.push(s[i]);return t}function addErrorDisplay(e,a,t){$("#"+e).css("border","1px solid red"),$("#"+a).addClass("display"),$("#"+a).html(t)}function removeErrorDisplay(e,a){$("#"+e).css("border","1px solid #becfd6"),$("#"+a).removeClass("display"),$("#"+a).html("")}window.onbeforeunload=function(e){if(1==ask_worning_for_close)return(e=e||window.event)&&(e.returnValue="Warning !"),"Warning !"},$(document).ready(function(){$("#error").submit(),$(".campaign-radio").click(function(){$(".selcampaignid").val($(this).val())}),$(".check-submit").click(function(){var e=$(this).data("typ"),a=($("#"+e+"_tab").serialize(),$("#"+e+"_no").val());if(a=a.replace(/ /g,""),$(".campaign_final_submit").val("1"),"netbnk"!=e&&"ppc"!=e||$(".consumercardid").val(a),"offercode"==e&&$(".campaigncoupon").val(a),("credit"==e||"debit"==e)&&isNaN(a)){var t="";return"Please enter digits only.","credit"==e&&(t="campaignccnumspan"),"debit"==e&&(t="campaigndcnumspan"),addErrorDisplay(e+"_no",t,"Please enter digits only."),!1}validateCampaignApi(a,e)})});var Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var a,t,r,s,i,n,l,o="",d=0;for(e=Base64._utf8_encode(e);d<e.length;)s=(a=e.charCodeAt(d++))>>2,i=(3&a)<<4|(t=e.charCodeAt(d++))>>4,n=(15&t)<<2|(r=e.charCodeAt(d++))>>6,l=63&r,isNaN(t)?n=l=64:isNaN(r)&&(l=64),o=o+this._keyStr.charAt(s)+this._keyStr.charAt(i)+this._keyStr.charAt(n)+this._keyStr.charAt(l);return o},_utf8_encode:function(e){var a="";if(null!=e)for(var t=0;t<e.length;t++){var r=e.charCodeAt(t);r<128?a+=String.fromCharCode(r):r>127&&r<2048?(a+=String.fromCharCode(r>>6|192),a+=String.fromCharCode(63&r|128)):(a+=String.fromCharCode(r>>12|224),a+=String.fromCharCode(r>>6&63|128),a+=String.fromCharCode(63&r|128))}return a},_utf8_decode:function(e){for(var a="",t=0,r=c1=c2=0;t<e.length;)(r=e.charCodeAt(t))<128?(a+=String.fromCharCode(r),t++):r>191&&r<224?(c2=e.charCodeAt(t+1),a+=String.fromCharCode((31&r)<<6|63&c2),t+=2):(c2=e.charCodeAt(t+1),c3=e.charCodeAt(t+2),a+=String.fromCharCode((15&r)<<12|(63&c2)<<6|63&c3),t+=3);return a}};function toggleOffersTab(){$(".offer-block").toggleClass("offer-collapse"),$("#offer-tab-btn span").toggleClass("off-tab-coll-icon"),$("#offer-tab-btn #offer-div-arrow").toggleClass("offer-arrow-up"),"Click here to open"==$("#offer-div-text").text()?$("#offer-div-text").text("Click here to close"):$("#offer-div-text").text("Click here to open")}function sendForgotPasswordlink(e,a){var t=a,r=$("#mercid").val();""==t?($("#frmErrors").css("display","block"),$("#frmErrors > p").html("Please enter a email id"),$("#frmErrors").delay(5e3).fadeOut("slow")):(t=Base64.encode(t),loader_show(),$.ajax({type:"POST",dataType:"json",url:"/pay/singleclickuser/singleForgotpassdb.php",data:"email="+t+"&mercid="+r,success:function(a){loader_hide();var t=a.status.trim();"E"==t&&showfrmError("Please enter a email id"),"VE"==t&&showfrmError("Please enter valid email id"),"VN"==t&&showfrmError("Please enter valid mobile number"),"err"==t&&showfrmError(a.msg),"FK"==t&&showfrmError("Forget password key in not valid!"),"ss"==t&&("express_pay"==e?($(".single-click-block .forget-password").fadeOut(),$(".single-click-block .sign-in-block").fadeIn(),$(".single-click-block .sign-up-block").fadeIn()):"pgcc"==e&&($("#saved-cr .forget-password").fadeOut(),$("#saved-cr .sign-in-block").fadeIn(500),$("#saved-cr .sign-up-block").fadeIn(500)),$(".success-block").css("display","block"),$(".success-block > p").html("Password verification link sent to your registered email id."),$(".success-block").delay(5e3).fadeOut("slow"))}}))}function ValidateDebitCardType(e,a){a=Base64.encode(a);var t=$("#mercid").val(),r=$("#amount").val(),s=$("#orderid").val();$.ajax({type:"POST",dataType:"json",url:"/pay/singleclickuser/validate_cardtype_api.php",data:"cardnum="+a+"&mercid="+t+"&amount="+r+"&orderid="+s,success:function(a){var t=a.status.trim(),r=a.cardtype.trim();if(200==t&&"pgdc"==e){if("D"==r)return $("#btndebitcardcheck").removeAttr("disabled"),$("#frmErrors").hide(),!1;if("C"==r||"U"==r)return showfrmError("Please use a valid debit card issued in india"),$("#c3").val(""),$("#d_cvv").val(""),$("#d_cexpiry_mm").prop("selectedIndex",0),$("#d_cexpiry_yy").prop("selectedIndex",0),!1}}})}function checkPasswordComplexity(e){var a=!0;return e.match(/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])[0-9a-zA-Z]{7,}$/)||(a=!1),a}function singleConsumerRegister(){var e=$(".resp-tabs-list li.resp-tab-active").text().replace(" Card",""),a=$("#singlemobileNo").val(),t=$("#single_email").val(),r=$("#singlepassword").val(),s=$("#singlerepassword").val(),i=$("#buyerFirstName").val(),n=$("#buyerLastName").val(),l=$("#token").val(),o=$("#token_flagCredit").val(),d=$("#mercid").val();""==a?addErrorDisplay("singlemobileNo","singlemobspan","Please enter mobile no."):isNaN(a)?addErrorDisplay("singlemobileNo","singlemobspan","Please enter valid mobile no."):""==t?(removeErrorDisplay("singlemobileNo","singlemobspan"),addErrorDisplay("single_email","singleemailspan","Please enter email-id")):/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(t)?""==r?(removeErrorDisplay("single_email","singleemailspan"),addErrorDisplay("singlepassword","scpwdspan","Please enter the password")):0==/^[a-zA-Z0-9- ]*$/.test(r)?addErrorDisplay("singlepassword","scpwdspan","Password should not contain any special characters"):checkPasswordComplexity(r)?r.length<7&&r.length>20?addErrorDisplay("singlerepassword","scpwdspan","Password should be minimum 7 characters"):""==s?addErrorDisplay("singlerepassword","screpwdspan","Please re-enter password"):r!=s?addErrorDisplay("singlerepassword","screpwdspan","Re-enter password does not matches"):(removeErrorDisplay("singlepassword","scpwdspan"),removeErrorDisplay("singlerepassword","screpwdspan"),t=Base64.encode(t),r=Base64.encode(r),s=Base64.encode(s),$.ajax({type:"POST",dataType:"json",url:"/pay/singleclickuser/addsingleuserdb.php",data:"email="+t+"&mercid="+d+"&mobileNo="+a+"&password="+r+"&repassword="+s+"&buyerFirstName="+i+"&buyerLastName="+n+"&token="+l+"&tokenflg="+o,success:function(a){var t=a.status.trim();if(200==parseInt(t)){$("#scbtnregi").attr("disabled",!1);var r=$(".jsWalletBlock").parents(".r-tabs-panel").find(".jsSavedCard").attr("data-tab");cnumval=$(".js_"+r+"_num").val(),cnumvaltxt=cnumval.split(" ").join(""),cnumexpm=$(".js_"+r+"_expiry_mm").val(),cnumexpyr=$(".js_"+r+"_expiry_yy").val(),cvv=$(".js_"+r+"_cvv").val(),""!=cnumvaltxt&&""!=cnumexpm&&""!=cnumexpyr&&""!=cvv&&($("#regisavecard").val("Y"),$("#regi_loginKey").val(a.scloginkey.trim()),$("#regisc_cnum_enc").val(cnumvaltxt),$("#regisc_expiryMonth").val(cnumexpm),$("#regisc_expiryYear").val(cnumexpyr),$("#regisc_cvv").val(cvv),$("#sc_savecard").val("Y"),$("#savecard").val("Y"),pageversion&&"v_popup"===pageversion?payIndexPg_popup():$("#singleregifrm").submit()),$("#frmSuccess").css("display","block"),$("#frmSuccess > p").html(a.msg)}else"err"==t?showfrmError(a.msg):($(".single_clickDetails"+e).show(),$(".singleclick_registration_wrap").show(),$("#Regi"+e).show(),$("#Regi"+e).html(a.msg))}})):addErrorDisplay("singlepassword","scpwdspan","Password must contain at least 7 characters, 1 uppercase character, 1 lowercase character and 1 number"):addErrorDisplay("single_email","singleemailspan","Please enter valid email-id")}function singleConsumerLogin(){$(".resp-tabs-list li.resp-tab-active").text().replace(" Card","");var e=$("#SingleUser").val();e=Base64.encode(e);var a=$("#spassword").val();a=Base64.encode(a);var t=$("#mercid").val(),r=$("#token").val(),s=$("#tokenflg").val();""==e?showfrmError("Enter your mobile no./e-mail id"):""==a?showfrmError("Enter your password"):($("#scbtnlgn").attr("disabled",!1),$.ajax({type:"POST",dataType:"json",url:"../pay/singleclickuser/ajaxloginconsumer_new.php",data:"email="+e+"&password="+a+"&mercid="+t+"&token="+r+"&tokenflg="+s,success:function(t){if($("#singlepwdspan").html(""),200==t.status.trim()){$("#scbtnlgn").attr("disabled",!0),$("#frmErrors").css("display","none");var r=$(".jsWalletBlock").parents(".r-tabs-panel").find(".jsSavedCard").attr("data-tab");cnumval=$(".js_"+r+"_num").val(),cnumvaltxt=cnumval.split(" ").join(""),cnumexpm=$(".js_"+r+"_expiry_mm").val(),cnumexpyr=$(".js_"+r+"_expiry_yy").val(),cvv=$(".js_"+r+"_cvv").val(),""!=cnumvaltxt&&""!=cnumexpm&&""!=cnumexpyr&&""!=cvv&&($("#sc_savecard").val("Y"),$("#cc_loginkey").val(t.scloginkey),$("#savecard").val("Y"),$("#sc_loginKey").val(t.scloginkey.trim()),$("#lgnsc_cnum_enc").val(cnumvaltxt),$("#lgnsc_expiryMonth").val(cnumexpm),$("#lgnsc_expiryYear").val(cnumexpyr),$("#lgnsc_cvv").val(cvv),$("#SingleUser").val(e),$("#spassword").val(a),pageversion&&"v_popup"===pageversion?payIndexPg_popup():$("#scLoginForm").submit()),$("#cardUqDetails").html(t.arrCcdetail),$("#savecardCredit").attr("onclick","javascript:void();"),$(".left-form-single-click3").hide(),$("#wrongPass").hide()}else showfrmError(t.msg)}}))}function showSingleClick(e){$(".forget-password").hide(),$(".cr-otp-login-block").hide(),$("#fullname").val($('[name="fullname"]').val());var a=e;if("Credit"==e)var t="c";else t="d";$(".resp-tabs-list li.resp-tab-active").text();var r=$('input[name="savecard'+a+'"]').is(":checked"),s=($("#token_flag").val(),$("#token").val());if(1==r)if(""!=s){var i=$("form[id='"+t+"cfrm']").find(".email_address").val();i=Base64.encode(i);var n=$("form[id='"+t+"cfrm']").find(".merchant_id").val();$.ajax({type:"POST",dataType:"json",url:"../pay/singleclickuser/ajaxloginconsumer_new.php",data:"email="+i+"&token="+s+"&mercid="+n,success:function(e){var r=e.status.trim();200==r?(cnumval=$(".js_"+t+"_num").val(),cnumvaltxt=cnumval.split(" ").join(""),cnumexpm=$(".js_"+t+"_expiry_mm").val(),cnumexpyr=$(".js_"+t+"_expiry_yy").val(),cvv=$(".js_"+t+"_cvv").val(),""!=cnumvaltxt&&""!=cnumexpm&&""!=cnumexpyr&&""!=cvv&&($("#regisavecard").val("Y"),$("#regi_loginKey").val(e.scloginkey.trim()),$("#regisc_cnum_enc").val(cnumvaltxt),$("#regisc_expiryMonth").val(cnumexpm),$("#regisc_expiryYear").val(cnumexpyr),$("#regisc_cvv").val(cvv),$("#spassword").val(spassword),pageversion&&"v_popup"===pageversion?payIndexPg_popup():$("#singleregifrm").submit())):185==r?($("#showDetails"+a).hide(),$(".single_clickDetails"+a).show(),$(".singleclick_registration_wrap").show(),$("#Login"+activeVal).show(),$("#Login"+activeVal).html(e.msg)):(cnumval=$("#c1").val(),cnumvaltxt=cnumval.split(" ").join(""),cnumexpm=$("#cexpiry_mm").val(),cnumexpyr=$("#cexpiry_yy").val(),cvv=$("#cvv").val(),""!=cnumvaltxt&&""!=cnumexpm&&""!=cnumexpyr&&""!=cvv&&($("form[id='"+$("#scLoginForm").attr("name")+"']").find("#savecard").val("Y"),$("#lgnsc_cnum_enc").val(cnumvaltxt),$("#lgnsc_expiryMonth").val(cnumexpm),$("#lgnsc_expiryYear").val(cnumexpyr),$("#lgnsc_cvv").val(cvv)),$("."+a+"-input-block").hide(),$("#saved-cr").show())}})}else $("."+a+"-input-block").hide(),$("#saved-cr").show(),$("#saved-cr .sign-up-block").show(),$("#saved-cr .sign-in-block").show()}function check_bin_range(e,a){var t,r,s=e.substr(0,6);r=[414767,416643,416644,416645,416646,436388,436389,436390,462409,524253,543705,547981,6e5,434668,478006,404861,405988],t={CC_MASTERCARD:[411111,523429,524178,524240,524508,524512,528571,530562,555219,559340,559341],CC_VISA:[400739,405995,411146,418212,434905,434975,434990,436560,451456,451457,451458,451459,451460,461116,461117,461118,464118,464119,471860,471861,471862,471863,471864,478053,483599,485905,486586,486602,559340,436560,411146]};var i=[552344,552088,434677,434678,517635,517652,528945,556620,556042,418136,524368,405028,486575,553162,524111,545226,461786,461787,467741,467742,436520,436306,540536,558818,532973,437546,532961,488994,552260,552274,552385,485498,485499,524216,545964,489377,489376,552394,457262,553583,558983,457704,360825,360826,360827,360828,360829,524931,533744,559300,553374,522852,524181,451104,471865,555153,360887,360886,481508,489519,367123,361011,368357,369620,436152,536311,360966,416317,463918,463919,463917,478024,552389,417410,552365],n=[{start:37693e10,end:376939999999999},{start:379861e9,end:379863999999999},{start:379867e9,end:379872999999999},{start:379876e9,end:379878999999999},{start:379397e9,end:379397999999999}];if("AMEXEMI"==a)for(var l=0;l<n.length;l++){var o=e;return n[l].start<=o&&n[l].end>=o}else{if("KOTAKEMI"==a){console.log("for loop "+r.length);for(l=0;l<r.length;l++){console.log("for loop "+r[l]),console.log("card num"+e);o=e;if(console.log("inside before"+r[l]),r[l]==s)return console.log("inside if"+r[l]),!0}return!1}if("HDFCEMI"==a){console.log("for loop hdfc 1 "+i.length);for(l=0;l<i.length;l++){console.log("for loop hdfc "+i[l]),console.log("card num hdfc "+e);o=e;if(console.log("inside before hdfc "+i[l]),i[l]==s)return console.log("inside if hdfc "+i[l]),!0}return!1}for(var d in t)for(var c in t[d]){var p=t[d][c];if(s.substring(0,p.toString().length)==p)return d}}return!1}function loader_show(){$("#loader-block").show(),$("#overlay").show(),$("#overlay").addClass("opacity-bg"),$("body").css("overflow","hidden")}function loader_hide(){$("#loader-block").hide(),$(".main-loader-block").hide(),$("#overlay").hide(),$("#overlay").removeClass("opacity-bg"),$("body").css("overflow","inherit")}function showfrmError(e){$("#frmErrors").css("display","block"),$("#frmErrors > p").html(e),$("#frmErrors").delay(1e4).fadeOut("slow")}function verifyOTP(e){var a=e,t=$("#mercid").val();if("exp_pay"==a)var r=$("#otp_email").val(),s=$("#txn_otppay").val();else if("pgcc"==a)r=$("#otp_emailcc").val(),s=$("#txn_otpcc").val();if(s=$.trim(s),""==r)showfrmError("Enter your Mobile No./E-mail Id");else if(""==s)showfrmError("Enter your OTP");else if(isNaN(s))showfrmError("Please enter the valid OTP");else{r=Base64.encode(r),s=Base64.encode(s);loader_show(),$("#frmErrors").css("display","none"),$.ajax({type:"POST",dataType:"json",url:"/pay/singleclickuser/verify_otp.php",data:"email="+r+"&mercid="+t+"&otp="+s,success:function(e){if(loader_hide(),200==e.status.trim()){if("exp_pay"==a)$("#otp_exp_pay").hide(),$("#expressPaymentID").show(),$("#cardUqDetailsL").html(e.arrCcdetail),$("#singleCloginKey").val(e.scloginkey),$("#cc_loginkey").val(e.scloginkey),$("form[name='ccfrm']").append('<input type="hidden" value="'+e.scloginkey+'" name="scloginkey" />'),$("#savecard").val("Y"),$("#sc_savecard").val("Y");else if("pgcc"==a){var t=$(".jsWalletBlock").parents(".r-tabs-panel").find(".jsSavedCard").attr("data-tab");cnumval=$(".js_"+t+"_num").val(),cnumvaltxt=cnumval.split(" ").join(""),cnumexpm=$(".js_"+t+"_expiry_mm").val(),cnumexpyr=$(".js_"+t+"_expiry_yy").val(),cvv=$(".js_"+t+"_cvv").val(),""!=cnumvaltxt&&""!=cnumexpm&&""!=cnumexpyr&&""!=cvv&&($("#sc_savecard").val("Y"),$("#savecard").val("Y"),$("#sc_loginKey").val(e.scloginkey.trim()),$("#lgnsc_cnum_enc").val(cnumvaltxt),$("#lgnsc_expiryMonth").val(cnumexpm),$("#lgnsc_expiryYear").val(cnumexpyr),$("#lgnsc_cvv").val(cvv),pageversion&&"v_popup"===pageversion?payIndexPg_popup():$("#scLoginForm").submit())}}else showfrmError(e.msg)}})}}function Mod10(e){var a=0;bResult=!1;for(var t=0;t<e.length;t++){var r=parseInt(e.substr(t,1));t%2==0&&(r*=2)>9&&(r=1+r%10),a+=r}return bResult=a%10==0,bResult||"invalid"}function Mod10OLD(e){var a=e.length,t=parseInt(e),r=e.toString();r=r.replace(/^\s+|\s+$/g,"");for(var s,i=0,n=!0,l=!1,o=0;o<a;o++)temp=""+r.substring(o,o+1),"-1"=="0123456789".indexOf(temp)&&(n=!1);if(n||(l=!1),0==a&&l)l=!1;else if(a>=15){for(var d=a;d>0;d--){switch(s=parseInt(t)%10,i+=s=parseInt(s),d--,t/=10,s=parseInt(t)%10,s*=2){case 10:s=1;break;case 12:s=3;break;case 14:s=5;break;case 16:s=7;break;case 18:s=9;break;default:s=s}t/=10,i+=s}l=i%10==0}return l||"invalid"}function validateOfferCCForm(){var e=!0;if(""==document.getElementById("credit_no").value)addErrorDisplay("credit_no","campaignccnumspan","Please enter card no."),$("#c1").val(""),e=!1;else{pvalue=document.getElementById("credit_no").value;var a=pvalue.split(" ").join("");if(!a.match(/^\d+$/))return addErrorDisplay("credit_no","campaignccnumspan","Please enter digits only."),$("#c1").val(""),e=!1,!1;var t=GetCardType(a);Mod10(a);if(void 0===t)addErrorDisplay("credit_no","campaignccnumspan","Invalid card no."),$("#c1").val(""),e=!1;else{var r,s=t.split("~"),i=s[0],n=s[1];"Visa"==i?r=new RegExp("^4"):"American Express"==i?r=new RegExp("^(34|37)"):"MasterCard"==i?r=new RegExp("^5[1-5]"):"Discover"==i?r=new RegExp("^6011"):"Rupay"==i&&(r=new RegExp("^(508|606|607|608|652|653)")),null!=a.match(r)&&(a.length!=n?(addErrorDisplay("credit_no","campaignccnumspan","Card no. should be "+n+" digits"),$("#c1").val(""),e=!1):(document.getElementById("cnumc").value=a,removeErrorDisplay("credit_no","campaignccnumspan")))}}return e}function validateOfferDCForm(){var e=!0,a=document.getElementById("debit_no").value.split(" ").join("");if(""==document.getElementById("debit_no").value)addErrorDisplay("debit_no","campaigndcnumspan","Please enter card no."),$("#c3").val(""),e=!1;else{if(!(a.length>=6))return addErrorDisplay("debit_no","campaigndcnumspan","Invalid card no."),$("#c3").val(""),!1;var t=get_card_type(a);if(a.match(/^\d+$/)){Mod10(a);if(void 0===t)addErrorDisplay("debit_no","campaigndcnumspan","Invalid card no."),$("#c3").val(""),e=!1;else if(""!=t)0==match_length(a,t)?(addErrorDisplay("debit_no","campaigndcnumspan","Card no. should be valid digits"),$("#c3").val(""),e=!1):(document.getElementById("cnumd")&&(document.getElementById("cnumd").value=a),removeErrorDisplay("debit_no","campaigndcnumspan"));else!0,document.getElementById("cnumd")&&(document.getElementById("cnumd").value=a),removeErrorDisplay("debit_no","campaigndcnumspan")}else addErrorDisplay("debit_no","campaigndcnumspan","Please enter digits only."),$("#c3").val(""),e=!1}return e}function validateOfferNBForm(){var e=!0;return""==$("#netbnk_no").val()&&(addErrorDisplay("netbnk_no","campaignnbnumspan","Please enter Customer Id."),e=!1),e}function validateOfferForm(){var e=!0;return""==$("#offercode_no").val()&&(addErrorDisplay("offercode","campaignoffernumspan","Please enter offercode."),e=!1),e}function validateCampaignApi(e,a){var t=$("input[name=buyerEmail]").val(),r=$("input[name=mercid]").val(),s=$(".selcampaignid").val(),i="",n=$("input[name=amount]").val(),l=$("input[name=currency]").val(),o=$("input[name=buyerPhone]").val(),d=$("input[name=privatekey]").val(),c="",p="";if(""==e)return"offercode"==a&&(c="Enter your offer code.",p="campaignoffernumspan"),"credit"==a&&(c="Enter your credit card number.",p="campaignccnumspan"),"debit"==a&&(c="Enter your debit card number.",p="campaigndcnumspan"),"netbnk"==a&&(c="Enter your customer id.",p="campaignnbnumspan"),addErrorDisplay(a+"_no",p,c),!1;if("debit"==a){var m=Base64.encode(e),u=(r=$("#mercid").val(),n=$("#amount").val(),$("#orderid").val());$.ajax({type:"POST",dataType:"json",url:"/pay/singleclickuser/validate_cardtype_api.php",data:"cardnum="+m+"&mercid="+r+"&amount="+n+"&orderid="+u,success:function(e){var a=e.status.trim(),t=e.cardtype.trim();if(200==a){if("D"==t)return v(),!1;if("C"==t||"U"==t)return showfrmError("Please use a valid debit card issued in india"),!1}}})}else v();function v(){loader_show(),$("#frmErrors").hide(),$(".error-msg").hide();var m="";m="offercode"==a?"&coupon="+e:"&consumercardid="+e,$.ajax({type:"POST",dataType:"json",data:"email="+t+"&mercid="+r+"&campaignid="+s+"&issuerid="+i+m+"&amount="+n+"&currency="+l+"&buyerPhone="+o+"&privatekey="+d,url:"/pay/campaign/validateCampaign_api.php"}).complete(function(e){loader_hide();var t=JSON.parse(e.responseText).CAMPAIGNS;if(200!=t.STATUS)return $("#frmErrors").show(),$("#frmErrors >p").html(t.STATUSMSG),setTimeout(function(){$("#frmErrors").hide(),$("#frmErrors >p").html("")},1e4),$(".error-msg").removeClass("display"),$("input:visible,select:visible").css("border","1px solid #becfd6"),$(".default-amount-block").show(),$(".discount-applied-block").hide(),unfreez(a),!1;if(""!=t.CAMPAIGN.CAMPAIGN_DISCOUNTAMT&&t.CAMPAIGN.CAMPAIGN_DISCOUNTAMT>0&&(checkSubmit(a),toggleOffersTab(),$(".default-amount-block").hide(),$(".discount-applied-block").show(),freez(a),$(".offer-block #frmErrors").hide(),$(".offer-block .error-msg").removeClass("display"),removeErrorDisplay(a+"_no",p,c),"netbnk"==a)){var r=$(".selcampaignid").val(),s=$("#campaign_issuernb"+r).val();RadionButtonSelectedValueSet(a,"nbbank_radio",s)}})}}function RadionButtonSelectedValueSet(e,a,t){t=t.toUpperCase(),$('input[name="'+a+'"][value="'+t+'"]').prop("checked",!0),$("#nbbank_select").val(t),$(".campaign_nb").val(t)}function removeSelection(){name="nbbank_radio",$('input[name="'+name+'"]').prop("checked",!1),$("#nbbank_select").val("0"),$(".campaign_final_submit").val("0"),$(".offer-block .r-tabs-panel").hide(),$($(".offer-block .r-tabs-state-active a").attr("href")).show()}function unfreez(e){isMobileCheck()&&(mobileTabsEnable(),$('[href="#tab-'+selectedTab+'"]').parents(".r-tabs-accordion-title").addClass("r-tabs-state-default r-tabs-state-active").removeClass("r-tabs-state-disabled")),$("#offer-respo-tab").responsiveTabs("enable",0),$("#offer-respo-tab").responsiveTabs("enable",1),$("#offer-respo-tab").responsiveTabs("enable",2),$("#offer-respo-tab").responsiveTabs("enable",3),$("#offer-respo-tab *").prop("disabled",!1),$("#offer-respo-tab div").removeClass("disabled-block"),"debit"!=e&&"credit"!=e||($("input[name=cnumtxt]").prop("disabled",!1),$("input[name=cnumtxt]").removeClass("readonly-input")),"netbnk"==e&&($("#popularBanks *").prop("disabled",!1),$("#popularBanks").removeClass("disabled-block"),$(".all-banks-dropdown*").prop("disabled",!1),$(".all-banks-dropdown").removeClass("disabled-block"))}function checkSubmit(e){$("#"+e+"_tab").serialize();var a=$("#"+e+"_no").val(),t=$(".selcampaignid").val();if("credit"==e)if(validateOfferCCForm()){$("#horizontalTab").responsiveTabs("disable",1),$("#horizontalTab").responsiveTabs("disable",2),$("#horizontalTab").responsiveTabs("disable",3),$("#horizontalTab").responsiveTabs("disable",4),$("#horizontalTab").responsiveTabs("disable",5),$("#horizontalTab").responsiveTabs("disable",6),$("#horizontalTab").responsiveTabs("disable",7),$("#horizontalTab").responsiveTabs("disable",8),$("#horizontalTab").responsiveTabs("disable",9),$("#horizontalTab").responsiveTabs("disable",10),$("#horizontalTab").responsiveTabs("disable",11),$("#horizontalTab").responsiveTabs("disable",12),$("#horizontalTab").responsiveTabs("disable",13),$("#horizontalTab").responsiveTabs("disable",14),$("#horizontalTab").responsiveTabs("activate",0),$("#c1").val(a);var r=$("#c1").val().substr(0,1),s=$("#c1").val().substr(0,2);$("#c1").removeClass("mastercard-icon visa-icon amex-icon crlogos"),4==r?$("#c1").addClass("visa-icon"):5==r&&50!=s?$("#c1").addClass("mastercard-icon"):34==s||37==s?$("#c1").addClass("amex-icon"):$("#c1").addClass("crlogos");var i=$("#amount").val(),n=$("#discountcc"+t).val(),l=$("#discounttypecc"+t).val(),o=($("#minamountcc"+t).val(),$("#maxamountcc"+t).val());if("p"==l)if(c=(c=parseFloat(i)*parseFloat(n)/100).toFixed(2),0!=parseFloat(o)){if(parseFloat(c)<=parseFloat(o)){var d=parseFloat(i)-parseFloat(c);$("#total_amount").text(i),$("#discount_amount").text(c),$("#html_amount").text(d.toFixed(2))}else if(parseFloat(c)>parseFloat(o)){d=parseFloat(i)-parseFloat(o);$("#total_amount").text(i),$("#discount_amount").text(o),$("#html_amount").text(d.toFixed(2))}}else{d=parseFloat(i)-parseFloat(c);$("#total_amount").text(i),$("#discount_amount").text(c),$("#html_amount").text(d.toFixed(2))}else if("f"==l){d=parseFloat(i)-parseFloat(n);$("#total_amount").text(i),$("#discount_amount").text(n),$("#html_amount").text(d.toFixed(2))}}else $("#discount_amount").text("00.00"),$("#html_amount").text($("#amount").val());else if("debit"==e){if(validateOfferDCForm()){$("#horizontalTab").responsiveTabs("disable",0),$("#horizontalTab").responsiveTabs("disable",2),$("#horizontalTab").responsiveTabs("disable",3),$("#horizontalTab").responsiveTabs("disable",4),$("#horizontalTab").responsiveTabs("disable",5),$("#horizontalTab").responsiveTabs("disable",6),$("#horizontalTab").responsiveTabs("disable",7),$("#horizontalTab").responsiveTabs("disable",8),$("#horizontalTab").responsiveTabs("disable",9),$("#horizontalTab").responsiveTabs("disable",10),$("#horizontalTab").responsiveTabs("disable",11),$("#horizontalTab").responsiveTabs("disable",12),$("#horizontalTab").responsiveTabs("disable",13),$("#horizontalTab").responsiveTabs("disable",14),$("#horizontalTab").responsiveTabs("activate",1),$("#c3").val(a);r=$("#c3").val().substr(0,1),s=$("#c3").val().substr(0,2);$("#c3").removeClass("mastercard-icon visa-icon amex-icon crlogos"),4==r?$("#c3").addClass("visa-icon"):5==r&&50!=s?$("#c3").addClass("mastercard-icon"):34==s||37==s?$("#c3").addClass("amex-icon"):$("#c3").addClass("crlogos");i=$("#amount").val(),n=$("#discountdc"+t).val(),l=$("#discounttypedc"+t).val(),$("#minamountdc"+t).val(),o=$("#maxamountdc"+t).val();if("p"==l)if(c=(c=parseFloat(i)*parseFloat(n)/100).toFixed(2),0!=parseFloat(o)){if(parseFloat(c)<=parseFloat(o)){d=parseFloat(i)-parseFloat(c);$("#total_amount").text(i),$("#discount_amount").text(c),$("#html_amount").text(d.toFixed(2))}else if(parseFloat(c)>parseFloat(o)){d=parseFloat(i)-parseFloat(o);$("#total_amount").text(i),$("#discount_amount").text(o),$("#html_amount").text(d.toFixed(2))}}else{d=parseFloat(i)-parseFloat(c);$("#total_amount").text(i),$("#discount_amount").text(c),$("#html_amount").text(d.toFixed(2))}else if("f"==l){d=parseFloat(i)-parseFloat(n);$("#total_amount").text(i),$("#discount_amount").text(n),$("#html_amount").text(d.toFixed(2))}}else $("#discount_amount").text("00.00"),$("#html_amount").text($("#amount").val())}else if("netbnk"==e){if(validateOfferNBForm()){$("#horizontalTab").responsiveTabs("disable",0),$("#horizontalTab").responsiveTabs("disable",1),$("#horizontalTab").responsiveTabs("disable",3),$("#horizontalTab").responsiveTabs("disable",4),$("#horizontalTab").responsiveTabs("disable",5),$("#horizontalTab").responsiveTabs("disable",6),$("#horizontalTab").responsiveTabs("disable",7),$("#horizontalTab").responsiveTabs("disable",8),$("#horizontalTab").responsiveTabs("disable",9),$("#horizontalTab").responsiveTabs("disable",10),$("#horizontalTab").responsiveTabs("disable",11),$("#horizontalTab").responsiveTabs("disable",12),$("#horizontalTab").responsiveTabs("disable",13),$("#horizontalTab").responsiveTabs("disable",14),$("#horizontalTab").responsiveTabs("activate",2);i=$("#amount").val(),n=$("#discountnb"+t).val(),l=$("#discounttypenb"+t).val(),$("#minamountnb"+t).val(),o=$("#maxamountnb"+t).val();if("p"==l)if(c=(c=parseFloat(i)*parseFloat(n)/100).toFixed(2),0!=parseFloat(o)){if(parseFloat(c)<=parseFloat(o)){d=parseFloat(i)-parseFloat(c);$("#total_amount").text(i),$("#discount_amount").text(c),$("#html_amount").text(d.toFixed(2))}else if(parseFloat(c)>parseFloat(o)){d=parseFloat(i)-parseFloat(o);$("#total_amount").text(i),$("#discount_amount").text(o),$("#html_amount").text(d.toFixed(2))}}else{d=parseFloat(i)-parseFloat(c);$("#total_amount").text(i),$("#discount_amount").text(c),$("#html_amount").text(d.toFixed(2))}else if("f"==l){d=parseFloat(i)-parseFloat(n);$("#total_amount").text(i),$("#discount_amount").text(n),$("#html_amount").text(d.toFixed(2))}}else $("#discount_amount").text("00.00"),$("#html_amount").text($("#amount").val())}else if("offercode"==e){if(validateOfferForm()){var c;i=$("#amount").val(),n=$("#discountcode"+t).val(),l=$("#discounttypecode"+t).val(),$("#minamountcode"+t).val(),o=$("#maxamountcode"+t).val();if("p"==l)if(c=(c=parseFloat(i)*parseFloat(n)/100).toFixed(2),0!=parseFloat(o)){if(parseFloat(c)<=parseFloat(o)){d=parseFloat(i)-parseFloat(c);$("#total_amount").text(i),$("#discount_amount").text(c),$("#html_amount").text(d.toFixed(2))}else if(parseFloat(c)>parseFloat(o)){d=parseFloat(i)-parseFloat(o);$("#total_amount").text(i),$("#discount_amount").text(o),$("#html_amount").text(d.toFixed(2))}}else{d=parseFloat(i)-parseFloat(c);$("#total_amount").text(i),$("#discount_amount").text(c),$("#html_amount").text(d.toFixed(2))}else if("f"==l){d=parseFloat(i)-parseFloat(n);$("#total_amount").text(i),$("#discount_amount").text(n),$("#html_amount").text(d.toFixed(2))}}else $("#discount_amount").text("00.00"),$("#html_amount").text($("#amount").val())}}function settimer(e,a){startTimer(60*$("#"+e).attr("rel"),document.querySelector("#"+e),a)}function startTimer(e,a,t){var r,s,i=e,n=setInterval(function(){if(r=parseInt(i/60,10),s=(s=parseInt(i%60,10))<10?"0"+s:s,(r=r<10?"0"+r:r)<=0&&s<=0)return a.innerHTML="Session Timeout!",clearInterval(n),$msg="vpa"==t?"Session timed out/Transaction Expired":"Session timed out",cancel_transaction($msg),!1;a.innerHTML="Session timeout in <span>"+r+":"+s+"</span> minutes!",--i<0&&(i=0)},1e3)}$(document).ready(function(){$("#cexpiry_yy").change(function(){""!=$("#c1").val()&&""!=$("#cexpiry_yy").val()&&""!=$("#cexpiry_mm").val()?$("#savecardCredit").removeAttr("disabled"):$("#savecardCredit").attr("disabled","true")}),$("#btnwtlogin").click(function(){var e=$("#walletUser").val(),a=$("#wpassword").val();a=Base64.encode(a);var t=$("#amount").val(),r=$("#mercid").val();""==e?$("#wlemail").show():""==$("#wpassword").val()?($(".left-form-single-click").show(),$("#wlpasswd").show()):$.ajax({type:"POST",dataType:"json",url:"/pay/consumer/ajaxloginconsumer.php",data:"walletUser="+e+"&mercid="+r+"&wpassword="+a,success:function(e){200==e.status.trim()?($("#consumerId").val(e.consumerid),$("#currentbalance").show(),$("#currentbalance").html("Available balance in wallet <b> INR "+e.balance+"</b>"),e.balance<t&&($("#btnwalletcheck").hide(),$("#walletlessmsg").show(),$("#walletlessmsg").html("Wallet balance not enough to complete this transaction")),$("#walletlogin").hide(),$("#walletbalshow").show()):($("#err-login").show(),$("#err-login").html(e.msg),$("#walletlogin").show())}})});$(".resp-tabs-list li.resp-tab-active").text().replace(" Card","");$("[class^=single_clickDetails]").hide(),$("#ccfrm #cexpiry_yy").on("change",function(){""!=$("#c1").val()&&""!=$("#cexpiry_yy").val()&&""!=$("#cexpiry_mm").val()?$("input:checkbox[name='savecardCredit']").removeAttr("disabled"):$("input:checkbox[name='savecardCredit']").attr("disabled","true")}),$("#btnscsubmit").on("click",function(){$("#frmErrors").hide();var e=$(".cardlist-content input:radio[name=carduniquecode]:checked").val(),a=$("#sc_cvv_"+e).val(),t="sc_cvv_"+e,r=$("#sc_cvv_"+e).data("cardissuer");return void 0===e?($("#frmErrors").show(),$("#frmErrors >p").html("Please select the card."),!1):($("#sc_cardunqspan").html(""),""==a?($("[id^=sc_cvvspan]").hide(),addErrorDisplay(t,"sc_cvvspan"+e,"Please enter cvv"),!1):/^[0-9]+$/.test(a)?a.length<3||a.length>4?(addErrorDisplay(t,"sc_cvvspan"+e,"Please enter valid cvv"),!1):"amex"==r&&a.length<=3?(addErrorDisplay(t,"sc_cvvspan"+e,"Please enter 4 digit cvv"),!1):($("#sc_cvvspan"+e).html(""),ask_worning_for_close=!1,!0):($("[id^=sc_cvvspan]").hide(),addErrorDisplay(t,"sc_cvvspan"+e,"Please enter the valid cvv"),!1))}),$(".frgtsubCredit").click(function(){sendForgotPasswordlink("pgcc",$("#forgotUserIdCredit").val())}),$("#offer-tab-btn").click(function(){toggleOffersTab()}),$(document).on("click",".flippings",function(){var e=$(this).attr("id");$("[id^=panel]").hide(),$("#panel"+e+"-new").show(),$(this).find("input").prop("checked",!0)})}),$(document).ready(function(){$("#horizontalTab").responsiveTabs({rotate:!1,startCollapsed:!1,collapsible:!1,setHash:!1,active:activeTab}),$("#offer-respo-tab").responsiveTabs({rotate:!1,startCollapsed:"accordion",collapsible:"accordion",setHash:!1}),$(document).on("click",".r-tabs-anchor",function(){if($(window).width()<768){var e=$(this).attr("href");return $("body").hasClass("iframe-content")?$(window).scrollTop($(e).position().top-35):$(window).scrollTop($(e).position().top),!1}}),$('input:radio[name="nbbank_radio"]').change(function(){$('input:radio[name="nbbank_radio"]').each(function(){$(this).parent().removeClass("active")}),$(this).is(":checked")?$(this).parent().addClass("active"):$(".bank-label").removeClass("active")}),$('input:radio[name="prepaid_radio"]').change(function(){$('input:radio[name="prepaid_radio"]').each(function(){$(this).parent().removeClass("active")}),$(this).is(":checked")?$(this).parent().addClass("active"):$(".bank-label").removeClass("active")}),$('input:radio[name="code-offers"]').change(function(){$('input:radio[name="code-offers"]').each(function(){$(this).parent().removeClass("active"),$(".offercode-inputcheck-block").hide()}),$(this).is(":checked")?($(this).parent().addClass("active"),$(".offercode-inputcheck-block").show()):($(".bank-label").removeClass("active"),$(".offercode-inputcheck-block").hide())}),$('input:radio[name="credit-offers"]').change(function(){$('input:radio[name="credit-offers"]').each(function(){$(this).parent().removeClass("active"),$(".credit-inputcheck-block").hide()}),$(this).is(":checked")?($(this).parent().addClass("active"),$(".credit-inputcheck-block").show()):($(".bank-label").removeClass("active"),$(".credit-inputcheck-block").hide())}),$('input:radio[name="debit-offers"]').change(function(){$('input:radio[name="debit-offers"]').each(function(){$(this).parent().removeClass("active"),$(".debit-inputcheck-block").hide()}),$(this).is(":checked")?($(this).parent().addClass("active"),$(".debit-inputcheck-block").show()):($(".bank-label").removeClass("active"),$(".debit-inputcheck-block").hide())}),$('input:radio[name="netbnk-offers"]').change(function(){$('input:radio[name="netbnk-offers"]').each(function(){$(this).parent().removeClass("active"),$(".net-inputcheck-block").hide()}),$(this).is(":checked")?($(this).parent().addClass("active"),$(".net-inputcheck-block").show()):($(".bank-label").removeClass("active"),$(".net-inputcheck-block").hide())}),$('input:radio[name="cell-offers"]').change(function(){$('input:radio[name="cell-offers"]').each(function(){$(this).parent().removeClass("active"),$(".mobile-inputcheck-block").hide()}),$(this).is(":checked")?($(this).parent().addClass("active"),$(".mobile-inputcheck-block").show()):($(".bank-label").removeClass("active"),$(".mobile-inputcheck-block").hide())}),$(".paygateway-submit").on("click",function(){0==$(".campaign_final_submit").val()&&$(".selcampaignid").val(""),ask_worning_for_close=!1}),$("#cancel_offer").on("click",function(){$("#horizontalTab").responsiveTabs("enable",0),$("#horizontalTab").responsiveTabs("enable",1),$("#horizontalTab").responsiveTabs("enable",2),$("#horizontalTab").responsiveTabs("enable",3),$("#horizontalTab").responsiveTabs("enable",4),$("#horizontalTab").responsiveTabs("enable",5),$("#horizontalTab").responsiveTabs("enable",6),$("#horizontalTab").responsiveTabs("enable",7),$("#horizontalTab").responsiveTabs("enable",8),$("#horizontalTab").responsiveTabs("enable",9),$("#horizontalTab").responsiveTabs("enable",10),$("#horizontalTab").responsiveTabs("enable",11),$("#horizontalTab").responsiveTabs("enable",12),$("#horizontalTab").responsiveTabs("enable",13),$("#horizontalTab").responsiveTabs("enable",14),mobileTabsDisable();var e="";if(removeSelection(),$("#tab_menu_list").each(function(){$(this).find("li").each(function(){current="",current=$(this),$(this).hasClass("r-tabs-state-active")&&(e=$(this).text())})}),"Credit Card"==e)$("#c1").val(""),$("#credit_no").val(""),$("#cexpiry_mm").val("MM"),$("#cexpiry_yy").val("YYYY"),$("#cvv").val(""),$("#cr-offer").prop("checked",!1),$("#discount_amount").text("00.00"),$("#html_amount").text($("#amount").val()),unfreez("credit");else if("Debit Card"==e){$("#c3").val(""),$("#debit_no").val(""),$("#d_cexpiry_mm").val("MM"),$("#d_cexpiry_yy").val("YYYY"),$("#d_cvv").val(""),$("#db-offer").prop("checked",!1),$("#discount_amount").text("00.00"),$("#html_amount").text($("#amount").val()),unfreez("debit")}else if("Net Banking"==e){$("#nbbank_select").val("0"),$("#netbnk_no").val(""),$("#net-offer").prop("checked",!1),$("#discount_amount").text("00.00"),$("#html_amount").text($("#amount").val()),unfreez("netbnk")}else"Cash"==e?($("#cash_pincode").val(""),$("#offercode_no").val(""),$("#discount_amount").text("00.00"),$("#html_amount").text($("#amount").val())):"EMI"==e?($("#emibank_select").val("0"),$("#emic1").val(""),$("#offercode_no").val(""),$("#emicexpiry_mm").val("MM"),$("#emicexpiry_yy").val("YYYY"),$("#emicvv").val(""),$("#discount_amount").text("00.00"),$("#html_amount").text($("#amount").val())):"Amex eZeClick"==e?($("#offercode_no").val(""),$("#discount_amount").text("00.00"),$("#html_amount").text($("#amount").val())):"Express Payments"==e&&($("#offercode_no").val(""),$("#discount_amount").text("00.00"),$("#html_amount").text($("#amount").val()));toggleOffersTab(),$(".discount-applied-block").hide(),$(".default-amount-block").show()}),$('input:radio[name="prepaid_radio"]').change(function(){if($("form#ccfrm").find("#amount").val()>9999)return $("#frmErrors").show().html('<div class="error-img-block"></div><p>This amount is above the set daily transaction limit by your bank, please try another payment method</p>'),$(".wallet-block-content").show(),$(".citrus-click-block").hide(),$("form#ppfrm").find("#ppc_submit").hide(),!1;if($(this).is(":checked")&&"CITRUS"===$(this).val())(e=document.createElement("script")).type="text/javascript",e.src="/pay/js/citrus2.js",document.getElementsByTagName("head")[0].appendChild(e),$(".wallet-block-content").hide(),$(".citrus-click-block").hide(),$(".wallet-citrus-otp").hide(),$(".wallet-citrus-checkbal").hide(),$(".citrus-click-block").show(),$(".wallet-citurs-login").show();else if($(this).is(":checked")&&"FREE"===$(this).val()){console.log("test pra"),(e=document.createElement("script")).type="text/javascript",e.src="/pay/js/freecharge.js",document.getElementsByTagName("head")[0].appendChild(e),$(".wallet-block-content").hide(),$(".freecharge-click-block").hide(),$(".wallet-freecharge-otp").hide(),$(".wallet-freecharge-checkbal").hide(),$(".freecharge-click-block").show(),$(".wallet-freecharge-login").show()}else if($(this).is(":checked")&&"YSE"===$(this).val()){var e;(e=document.createElement("script")).type="text/javascript",e.src="/pay/js/sodexo.js",document.getElementsByTagName("head")[0].appendChild(e),$(".wallet-block-content").hide(),$(".sodexo-click-block").show(),$(".delink-click-block").hide()}else console.log("test 3"),$(".citrus-click-block").hide(),$(".wallet-citrus-otp").hide(),$(".wallet-citurs-login").hide(),$(".citrus-click-block").hide(),$(".wallet-citrus-checkbal").hide(),$(".wallet-block-content").show()}),$(".forgot-cre-back").click(function(){$("#saved-cr .forget-password").fadeOut(),$("#saved-cr .sign-in-block").fadeIn(500),$("#saved-cr .sign-up-block").fadeIn(500)}),$(".forgot-credit").click(function(){$("#saved-cr .sign-up-block").fadeOut(),$("#saved-cr .sign-in-block").fadeOut(),$("#saved-cr .forget-password").fadeIn()}),$(".cr-otp-back").click(function(){$("#saved-cr .cr-otp-login-block").fadeOut(),$("#saved-cr .sign-in-block").fadeIn(500),$("#saved-cr .sign-up-block").fadeIn(500)}),$(".dnt-cr").click(function(){if($("#saved-cr .sign-up-block").fadeOut(),$("#saved-cr .sign-in-block").fadeOut(),$("#saved-cr").fadeOut(),"c"==$(".jsWalletBlock").parents(".r-tabs-panel").find(".jsSavedCard").attr("data-tab"))var e="Credit";else e="Debit";$("."+e+"-input-block").fadeIn(500)}),$("#forgot-single-textCredit").click(function(){$("#saved-cr .sign-up-block").fadeOut(),$("#saved-cr .sign-in-block").fadeOut(),$("#saved-cr .forget-password").fadeIn()}),$(".card-list-cvv").hide(),$(document).on("click",".cardlist-content",function(){var e=$(this).attr("id");$("[id^=panel]").hide(),$("#panel"+e+"-new").show(),$(this).find("input").prop("checked",!0)}),$(".air-wall-forgot").click(function(){$(".airpay-wallet-block .forget-password").fadeOut(),$(".airpay-wallet-block .sign-in-block").fadeIn()}),$(".forgot-back-air-wall").click(function(){$(".airpay-wallet-block .sign-in-block").fadeOut(),$(".airpay-wallet-block .sign-up-block").fadeOut(),$(".airpay-wallet-block .forget-password").fadeIn()}),$(".frgtsub").click(function(){var e=$("#walletForgotUser").val(),a=$("#mercid").val();""==e?$(".err-place").show():$.ajax({type:"POST",url:"/pay/consumer/consumerForgotpassdb.php",data:"email="+e+"&mercid="+a,success:function(e){200==e&&($(".left-form-single-click").fadeIn(500),$(".thnkyoustate").css("visibility","visible"),$(".forgot-pass-panel").hide()),"E"==e&&($(".err-place").show(),$(".err-place").html("Please enter Valid Email Id")),"VE"==e&&($(".err-place").show(),$(".err-place").html("Please enter Valid Email Id")),"FK"==e&&($(".err-place").show(),$(".err-place").html("Forget password key in not valid!")),"ss"==e&&($(".forget-password").hide(),$(".sign-in-block").fadeIn(500),$(".err-place").show(),$(".err-place").html("Password verification link sent to your registered email id")),"ff"==e&&(msg=e.info)}})}),$(".emi-tenure-table").hide(),$("#cashaddrtitle").hide(),$("#listArea").hide(),$("#cash_pincode").keyup(function(){$(".inlinePins").hide();var e=$(this).val();6!=e.length||isNaN(e)?($(".inlinePins").show(),$("#listArea").hide()):$.ajax({type:"POST",url:"inlinePincodes.php",data:"pincode="+e,success:function(e){$(".inlinePins").show(),"1"==(e=e.trim())?($("#cashaddrtitle").show(),$(".inlinePins").html('<div class="result-pin-add"><p>No records found!</p></div>')):"2"==e?($("#cashaddrtitle").show(),$(".inlinePins").html('<div class="result-pin-add"><p>No records found!</p></div>')):""==e?($("#cashaddrtitle").show(),$(".inlinePins").html('<div class="result-pin-add"><p>No records found!</p></div><div class="pin-res-nav"><div id="how-cash" class="fl"><a href="javascript:void(0);" class="fl">how does it work?</a><div class="howcash-content"><p><strong>Step 1:</strong> You will get an SMS with your unique &quot;airpay id&quot;.</p><p><strong>Step 2:</strong> Go to the closest deposit location. You can find more locations by smsing &quot;paycash &lt;your pincode&gt;&quot; to 54646.</p><p><strong>Step 3:</strong> Give the agent your unique &quot;airpay id&quot; and cash.</p><p><strong>Step 4:</strong> Take your confirmation receipt from the agent.</p></div></div></div>')):($("#cashaddrtitle").show(),$(".inlinePins").html(e),$("#listArea").show())},error:function(e){successmessage="Error"}})}),$("#popularBanks input[name='nbbank_radio']").click(function(){var e=$(this).attr("value");$("#nbbank_select").val(e),$("#nbbank_selectspan").html(""),document.getElementById("nbbank_select").style.borderColor=""}),$("#nbbank_select").change(function(){"0"==$("#nbbank_select").val()?$("#nbbank_selectspan").html("Please select bank."):$("#nbbank_selectspan").html("");var e=$(this).val();$("#popularBanks .radio-box").prop("checked",!1),$("#popularBanks #"+e+"_bank").prop("checked",!0);$("#nbbank_select").val()}),$(document).on("click","#cls-popup",function(){$(".cash-popup").css("display","none")}),$(document).on("click","#listArea",function(){var e=$("#cash_pincode").val();""==e?($("#cashpincodespan").show(),$("#cashpincodespan").html("Please enter pincode")):e.length<6||isNaN(e)?($("#cashpincodespan").show(),$("#cashpincodespan").html("Please enter 6 Digits")):($.ajax({type:"POST",url:"ajax_checkPincode.php",data:"pincode="+e,success:function(e){$(".cash-popup").css("display","block"),$(".cash-popup").html(e)},error:function(e){successmessage="Error"}}),$("html").addClass("fancyloader"),setTimeout(function(){$("html").removeClass("fancyloader")},3e3))}),$(".try-again-btn").click(function(){$(".retry-page").fadeOut()}),$("#card1").click(function(){$(this).parent().parent().parent().find(".card-list-cvv").addClass("card-list-cvv-block"),$("#card2").parent().parent().parent().find(".card-list-cvv").removeClass("card-list-cvv-block")}),$("#card2").click(function(){$(this).parent().parent().parent().find(".card-list-cvv").addClass("card-list-cvv-block"),$("#card1").parent().parent().parent().find(".card-list-cvv").removeClass("card-list-cvv-block")})}),function(e,a,t){function r(a,t){this.element=a,this.$element=e(a),this.tabs=[],this.state="",this.rotateInterval=0,this.$queue=e({}),this.options=e.extend({},s,t),this.init()}var s={active:null,event:"click",disabled:[],collapsible:"accordion",startCollapsed:!1,rotate:!1,setHash:!1,animation:"default",animationQueue:!1,duration:500,fluidHeight:!0,scrollToAccordion:!1,scrollToAccordionOnLoad:!0,scrollToAccordionOffset:0,accordionTabElement:"<div></div>",click:function(){},activate:function(){},deactivate:function(){},load:function(){},activateState:function(){},classes:{stateDefault:"r-tabs-state-default",stateActive:"r-tabs-state-active",stateDisabled:"r-tabs-state-disabled",stateExcluded:"r-tabs-state-excluded",container:"r-tabs",ul:"r-tabs-nav",tab:"r-tabs-tab",anchor:"r-tabs-anchor",panel:"r-tabs-panel",accordionTitle:"r-tabs-accordion-title"}};r.prototype.init=function(){var t=this;this.tabs=this._loadElements(),this._loadClasses(),this._loadEvents(),e(a).on("resize",function(e){t._setState(e),!0!==t.options.fluidHeight&&t._equaliseHeights()}),e(a).on("hashchange",function(e){var r=t._getTabRefBySelector(a.location.hash),s=t._getTab(r);r>=0&&!s._ignoreHashChange&&!s.disabled&&t._openTab(e,t._getTab(r),!0)}),!1!==this.options.rotate&&this.startRotation(),!0!==this.options.fluidHeight&&t._equaliseHeights(),this.$element.bind("tabs-click",function(e,a){t.options.click.call(this,e,a)}),this.$element.bind("tabs-activate",function(e,a){t.options.activate.call(this,e,a)}),this.$element.bind("tabs-deactivate",function(e,a){t.options.deactivate.call(this,e,a)}),this.$element.bind("tabs-activate-state",function(e,a){t.options.activateState.call(this,e,a)}),this.$element.bind("tabs-load",function(e){var a;t._setState(e),!0===t.options.startCollapsed||"accordion"===t.options.startCollapsed&&"accordion"===t.state||(a=t._getStartTab(),t._openTab(e,a),t.options.load.call(this,e,a))}),this.$element.trigger("tabs-load")},r.prototype._loadElements=function(){var a=this,t=this.$element.children("ul:first"),r=[],s=0;return this.$element.addClass(a.options.classes.container),t.addClass(a.options.classes.ul),e("li",t).each(function(){var t,i,n,l,o,d=e(this);if(!d.hasClass(a.options.classes.stateExcluded)){o=(t=e("a",d)).attr("href"),i=e(o),n=e(a.options.accordionTabElement).insertBefore(i),l=e("<a></a>").attr("href",o).html(t.html()).appendTo(n);var c={_ignoreHashChange:!1,id:s,disabled:-1!==e.inArray(s,a.options.disabled),tab:e(this),anchor:e("a",d),panel:i,selector:o,accordionTab:n,accordionAnchor:l,active:!1};s++,r.push(c)}}),r},r.prototype._loadClasses=function(){for(var e=0;e<this.tabs.length;e++)this.tabs[e].tab.addClass(this.options.classes.stateDefault).addClass(this.options.classes.tab),this.tabs[e].anchor.addClass(this.options.classes.anchor),this.tabs[e].panel.addClass(this.options.classes.stateDefault).addClass(this.options.classes.panel),this.tabs[e].accordionTab.addClass(this.options.classes.accordionTitle),this.tabs[e].accordionAnchor.addClass(this.options.classes.anchor),this.tabs[e].disabled&&(this.tabs[e].tab.removeClass(this.options.classes.stateDefault).addClass(this.options.classes.stateDisabled),this.tabs[e].accordionTab.removeClass(this.options.classes.stateDefault).addClass(this.options.classes.stateDisabled))},r.prototype._loadEvents=function(){for(var e=this,t=function(t){var r=e._getCurrentTab(),s=t.data.tab;t.preventDefault(),s.tab.trigger("tabs-click",s),s.disabled||(e.options.setHash&&(history.pushState?(a.location.origin||(a.location.origin=a.location.protocol+"//"+a.location.hostname+(a.location.port?":"+a.location.port:"")),history.pushState(null,null,a.location.origin+a.location.pathname+a.location.search+s.selector)):a.location.hash=s.selector),t.data.tab._ignoreHashChange=!0,(r!==s||e._isCollapisble())&&(e._closeTab(t,r),r===s&&e._isCollapisble()||e._openTab(t,s,!1,!0)))},r=0;r<this.tabs.length;r++)this.tabs[r].anchor.on(e.options.event,{tab:e.tabs[r]},t),this.tabs[r].accordionAnchor.on(e.options.event,{tab:e.tabs[r]},t)},r.prototype._getStartTab=function(){var e=this._getTabRefBySelector(a.location.hash);return e>=0&&!this._getTab(e).disabled?this._getTab(e):this.options.active>0&&!this._getTab(this.options.active).disabled?this._getTab(this.options.active):this._getTab(0)},r.prototype._setState=function(a){var r,s=e("ul:first",this.$element),i=this.state,n="string"==typeof this.options.startCollapsed;s.is(":visible")?this.state="tabs":this.state="accordion",this.state!==i&&(this.$element.trigger("tabs-activate-state",{oldState:i,newState:this.state}),i&&n&&this.options.startCollapsed!==this.state&&this._getCurrentTab()===t&&(r=this._getStartTab(a),this._openTab(a,r)))},r.prototype._openTab=function(a,t,r,s){var i,n=this;r&&this._closeTab(a,this._getCurrentTab()),s&&this.rotateInterval>0&&this.stopRotation(),t.active=!0,t.tab.removeClass(n.options.classes.stateDefault).addClass(n.options.classes.stateActive),t.accordionTab.removeClass(n.options.classes.stateDefault).addClass(n.options.classes.stateActive),n._doTransition(t.panel,n.options.animation,"open",function(){var r="tabs-load"!==a.type||n.options.scrollToAccordionOnLoad;t.panel.removeClass(n.options.classes.stateDefault).addClass(n.options.classes.stateActive),"accordion"!==n.getState()||!n.options.scrollToAccordion||n._isInView(t.accordionTab)&&"default"===n.options.animation||!r||(i=t.accordionTab.offset().top-n.options.scrollToAccordionOffset,"default"!==n.options.animation&&n.options.duration>0?e("html, body").animate({scrollTop:i},n.options.duration):e("html, body").scrollTop(i))}),this.$element.trigger("tabs-activate",t)},r.prototype._closeTab=function(e,a){var r,s=this,i="string"==typeof s.options.animationQueue;a!==t&&(r=!(!i||s.getState()!==s.options.animationQueue)||!i&&s.options.animationQueue,a.active=!1,a.tab.removeClass(s.options.classes.stateActive).addClass(s.options.classes.stateDefault),s._doTransition(a.panel,s.options.animation,"close",function(){a.accordionTab.removeClass(s.options.classes.stateActive).addClass(s.options.classes.stateDefault),a.panel.removeClass(s.options.classes.stateActive).addClass(s.options.classes.stateDefault)},!r),this.$element.trigger("tabs-deactivate",a))},r.prototype._doTransition=function(e,a,t,r,s){var i,n=this;switch(a){case"slide":i="open"===t?"slideDown":"slideUp";break;case"fade":i="open"===t?"fadeIn":"fadeOut";break;default:i="open"===t?"show":"hide",n.options.duration=0}this.$queue.queue("responsive-tabs",function(s){e[i]({duration:n.options.duration,complete:function(){r.call(e,a,t),s()}})}),("open"===t||s)&&this.$queue.dequeue("responsive-tabs")},r.prototype._isCollapisble=function(){return"boolean"==typeof this.options.collapsible&&this.options.collapsible||"string"==typeof this.options.collapsible&&this.options.collapsible===this.getState()},r.prototype._getTab=function(e){return this.tabs[e]},r.prototype._getTabRefBySelector=function(e){for(var a=0;a<this.tabs.length;a++)if(this.tabs[a].selector===e)return a;return-1},r.prototype._getCurrentTab=function(){return this._getTab(this._getCurrentTabRef())},r.prototype._getNextTabRef=function(e){var a=e||this._getCurrentTabRef(),t=a===this.tabs.length-1?0:a+1;return this._getTab(t).disabled?this._getNextTabRef(t):t},r.prototype._getPreviousTabRef=function(){return 0===this._getCurrentTabRef()?this.tabs.length-1:this._getCurrentTabRef()-1},r.prototype._getCurrentTabRef=function(){for(var e=0;e<this.tabs.length;e++)if(this.tabs[e].active)return e;return-1},r.prototype._equaliseHeights=function(){var a=0;e.each(e.map(this.tabs,function(e){return a=Math.max(a,e.panel.css("minHeight","").height()),e.panel}),function(){this.css("minHeight",a)})},r.prototype._isInView=function(t){var r=e(a).scrollTop(),s=r+e(a).height(),i=t.offset().top;return s>=i+t.height()&&i>=r},r.prototype.activate=function(e,a){var t=jQuery.Event("tabs-activate"),r=this._getTab(e);r.disabled||this._openTab(t,r,!0,a||!0)},r.prototype.deactivate=function(e){var a=jQuery.Event("tabs-dectivate"),t=this._getTab(e);t.disabled||this._closeTab(a,t)},r.prototype.enable=function(e){var a=this._getTab(e);a&&(a.disabled=!1,a.tab.addClass(this.options.classes.stateDefault).removeClass(this.options.classes.stateDisabled),a.accordionTab.addClass(this.options.classes.stateDefault).removeClass(this.options.classes.stateDisabled))},r.prototype.disable=function(e){var a=this._getTab(e);a&&(a.disabled=!0,a.tab.removeClass(this.options.classes.stateDefault).addClass(this.options.classes.stateDisabled),a.accordionTab.removeClass(this.options.classes.stateDefault).addClass(this.options.classes.stateDisabled))},r.prototype.getState=function(){return this.state},r.prototype.startRotation=function(a){var t=this;if(!(this.tabs.length>this.options.disabled.length))throw new Error("Rotation is not possible if all tabs are disabled");this.rotateInterval=setInterval(function(){var e=jQuery.Event("rotate");t._openTab(e,t._getTab(t._getNextTabRef()),!0)},a||(e.isNumeric(t.options.rotate)?t.options.rotate:4e3))},r.prototype.stopRotation=function(){a.clearInterval(this.rotateInterval),this.rotateInterval=0},r.prototype.option=function(e,a){return a&&(this.options[e]=a),this.options[e]},e.fn.responsiveTabs=function(a){var s,i=arguments;return a===t||"object"==typeof a?this.each(function(){e.data(this,"responsivetabs")||e.data(this,"responsivetabs",new r(this,a))}):"string"==typeof a&&"_"!==a[0]&&"init"!==a?(s=e.data(this[0],"responsivetabs"),"destroy"===a&&e.data(this,"responsivetabs",null),s instanceof r&&"function"==typeof s[a]?s[a].apply(s,Array.prototype.slice.call(i,1)):this):void 0}}(jQuery,window),$(window).load(function(){$("#overlay").fadeOut(1e3),$("body").css("overflow","")});var renderSelectedTabMethod,isMobileCheck,languageJson,govtIdRequired="",andFlag=!1,orFlag=!1,divFlag="",pan="",aadhar="",otp="",action="",rid="";function doRedirect(){if(!$("#virtualaccount").val())return $.ajax({type:"POST",url:"get_account_details_api.php",dataType:"json",data:$("#rtgsfrm").serialize(),success:function(e){"200"==e.STATUS?($(".r-tabs-nav li").hide(),$(".r-tabs-nav li.r-tabs-state-active").show(),$("body").addClass("virtualacc"),$("#jsRtgsVANum").html(e.VIRTUALACCOUNT),$("#virtualaccount").val(e.VIRTUALACCOUNT),$("#rtgsfrm").attr("action",e.HANDLER),$("#jsRtgsVirtucalAcc").css("display","block"),$("#jsRtgsInfo").css("display","none")):($("<input type='hidden' />").attr("value",e.STATUSMSG).attr("name","msg").prependTo("#rtgsfrm"),$("#rtgsfrm").attr("action","/pay/index.php"),$("#rtgsfrm").submit(),$("body").removeClass("virtualacc"))}}),!1;$("#rtgsfrm").submit()}function doRedirectVA(){if(!$("#va_account").val())return $.ajax({type:"POST",url:"get_account_details_api_va.php",dataType:"json",data:$("#vafrm").serialize(),success:function(e){"200"==e.STATUS?($("#jsVANum").html(e.VIRTUALACCOUNT),$("#va_account").val(e.VIRTUALACCOUNT),$("#vafrm").attr("action",e.HANDLER),$("#jsVaVirtucalAcc").css("display","block"),$("#jsVaInfo").css("display","none")):($("<input type='hidden' />").attr("value",e.STATUSMSG).attr("name","msg").prependTo("#vafrm"),$("#vafrm").attr("action","/pay/index.php"),$("#vafrm").submit())}}),!1;$("#vafrm").submit()}function validateKissht(){var e=$(".ks_buyerEmail").val(),a=$(".ks_buyerPhone ").val(),t=$("#ks_buyerFirstName").val(),r=$("#ks_buyerLastName").val(),s=($("#buyerCity").val(),!0);if(""==e)$(".ks_buyerEmail ").next(".error-msg").addClass("display").html("Please enter email."),s=!1;else{pvalue=e;var i=/^[_\.0-9a-zA-Z-]+@([0-9a-zA-Z][0-9a-zA-Z-]+\.)+[a-zA-Z]{2,6}$/i;pvalue.match(i)?$(".ks_buyerEmail ").next(".error-msg").removeClass("display"):($(".ks_buyerEmail ").next(".error-msg").addClass("display").html("Please enter valid email."),s=!1)}if(""==a)$(".ks_buyerPhone ").next(".error-msg").addClass("display").html("Please enter phone no."),s=!1;else{pvalue=a;i="[0-9]{10}";pvalue.match(i)?$(".ks_buyerPhone ").next(".error-msg").removeClass("display"):($(".ks_buyerPhone ").next(".error-msg").addClass("display").html("Please enter valid mobile no."),s=!1)}if(""==t)$("#ks_buyerFirstName").next(".error-msg").addClass("display").html("Please enter first name."),s=!1;else{pvalue=t;i="^[a-zA-Z]+$";pvalue.match(i)?$("#ks_buyerFirstName").next(".error-msg").removeClass("display"):($("#ks_buyerFirstName").next(".error-msg").addClass("display").html("Please enter valid first name."),s=!1)}if(""==r)$("#ks_buyerLastName").next(".error-msg").addClass("display").html("Please enter last name."),s=!1;else{pvalue=r;i="^[a-zA-Z]+$";pvalue.match(i)?$("#ks_buyerLastName").next(".error-msg").removeClass("display"):($("#ks_buyerLastName").next(".error-msg").addClass("display").html("Please enter valid last name."),s=!1)}return s}function postRedirectUrl(e,a){var t=document.createElement("form");for(var r in t.setAttribute("method","post"),t.setAttribute("action",e),a)if(a.hasOwnProperty(r)){var s=document.createElement("input");s.setAttribute("type","hidden"),s.setAttribute("name",r),s.setAttribute("value",a[r]),t.appendChild(s)}document.body.appendChild(t),t.submit()}function loadTranslateJson(){var e;e="mr.json",(languageJson=JSON.parse(localStorage.getItem("mr-payment")))||$.ajax("./language/"+e,{success:$.proxy(function(e,a){languageJson=JSON.parse(a),localStorage.setItem(e+"-payment",a)},this,"mr")})}function translate(e){return languageJson[e]||e}$("#pay-proceed").on("click",function(){$("head").append($("<link rel='stylesheet' href='js/jquery-ui/jquery-ui.min.css' type='text/css' media='screen' />")),$.getScript("js/jquery-ui/jquery-ui.min.js",function(){var e=new Date,a=e.getFullYear()-18;$("#dob").datepicker({changeMonth:!0,changeYear:!0,dateFormat:"dd-mm-yy",yearRange:"-120:-18",defaultDate:new Date(a,e.getMonth(),e.getDate())})});var e=$("#privatekey").val(),a=$("#orderid").val(),t=$("#airpay_transaction_id").val(),r=$("#amount").val(),s=$("#isocurrency").val(),i=$("#currency_payltr").val(),n=$("#merchant_id").val(),l=$("#MobileNo").val(),o=$("#EmailId").val(),d=$("#FirstName").val(),c=$("#LastName").val(),p=$("#buyerAddress").val(),m=$("#buyerCity").val(),u=$("#buyerState").val(),v=$("#buyerCountry").val(),b=$("#buyerPinCode").val(),y=$("#mobile_no").val(),h=$("#customvar").val(),f=$("#txnsubtype").val(),g=$("#checksum").val(),_=($("#category").val(),$("#txnmode").val()),k=$("#rid").val(),C=$("#buyerEmail").val(),x=$("#buyerPhone").val(),E=$("#buyerFirstName").val(),w=$("#buyerLastName").val();if(""==o)return $("#EmailId").next(".error-msg").addClass("display").html("Please enter email id."),!1;pvalue=o;var T=/^[_\.0-9a-zA-Z-]+@([0-9a-zA-Z][0-9a-zA-Z-]+\.)+[a-zA-Z]{2,6}$/i;if(!pvalue.match(T))return $("#EmailId").next(".error-msg").addClass("display").html("please enter valid email id."),!1;if($("#EmailId").next(".error-msg").removeClass("display"),""==l)return $("#MobileNo").next(".error-msg").addClass("display").html("Please enter mobile no."),!1;pvalue=l;T="[0-9]{10}";if(!pvalue.match(T))return"#MobileNo".next(".error-msg").addClass("display").html("please enter valid mobile number."),!1;if($("#MobileNo").next(".error-msg").removeClass("display"),""==d)return $("#FirstName").next(".error-msg").addClass("display").html("please enter first name."),!1;pvalue=d;T="^[a-zA-Z]+$";if(!pvalue.match(T))return $("#FirstName").next(".error-msg").addClass("display").html("please enter valid first name."),!1;if($("#FirstName").next(".error-msg").removeClass("display"),""==c)return $("#LastName").next(".error-msg").addClass("display").html("Please enter last name."),!1;pvalue=c;T="^[a-zA-Z]+$";if(!pvalue.match(T))return $("#LastName").next(".error-msg").addClass("display").html("Please enter valid last name."),!1;$("#LastName").next(".error-msg").removeClass("display"),loader_show(),"SANDBOX"==_?callNewIndexapi(action="sandboxmode",e,a,k,r,s,i,n,l,o,d,c,p,m,u,v,b,y,h,f,g,pan,aadhar,otp,divFlag=""):$.ajax({type:"POST",dataType:"json",url:"/paylater/newindex_api.php",data:"action=checkEligibility&privatekey="+e+"&orderid="+a+"&mercid="+n+"&amount="+r+"&isocurrency="+s+"&currency="+i+"&buyerPhone1="+l+"&buyerEmail1="+o+"&buyerFirstName1="+d+"&buyerLastName1="+c+"&buyerAddress="+p+"&buyerCity="+m+"&buyerState="+u+"&buyerCountry="+v+"&buyerPinCode="+b+"&mobile_no="+l+"&customvar="+h+"&txnsubtype="+f+"&checksum="+g+"&pan="+pan+"&aadhar="+aadhar+"&otp="+otp+"&divFlag="+divFlag+"&rid="+k+"&buyerPhone="+x+"&buyerEmail="+C+"&buyerFirstName="+E+"&buyerLastName="+w,success:function(_){if(""!=_)if(loader_hide(),"true"==_.redirectionFlag)$("#frmerror").html(_.redirection),$("#error").submit();else{data1=JSON.parse(_),$("#rid").val(data1.RID);var k=$("#rid").val(),T=(data1.id,data1.paylater),P=data1.status;if(govtIdRequired=data1.govtIdRequired,"new"==P&&T){if("pan"==govtIdRequired)$("#AdharNo").attr("type","hidden");else if("aadhaar"==govtIdRequired)$("#PanNo").attr("type","hidden");else if(-1!=govtIdRequired.indexOf("and")){govtIdRequired.split("and");andFlag=!0}else if(-1!=govtIdRequired.indexOf("or")){govtIdRequired.split("or");orFlag=!0}else{$("#epay-uid").css("display","none"),$("#payltrNote").hide(),$("#P1").removeClass("hold"),$("#P1").addClass("comp"),$("#P2").addClass("comp"),loader_show(),$.ajax({type:"POST",dataType:"json",url:"/paylater/newindex_api.php",data:"action=validatePanAaadhar&privatekey="+e+"&orderid="+a+"&transactionId="+t+"&mercid="+n+"&amount="+r+"&isocurrency="+s+"&currency="+i+"&buyerPhone1="+l+"&buyerEmail1="+o+"&buyerFirstName1="+d+"&buyerLastName1="+c+"&buyerAddress="+p+"&buyerCity="+m+"&buyerState="+u+"&buyerCountry="+v+"&buyerPinCode="+b+"&mobile_no="+l+"&customvar="+h+"&txnsubtype="+f+"&checksum="+g+"&pan="+pan+"&aadhar="+aadhar+"&otp="+otp+"&divFlag="+divFlag+"&rid="+k+"&buyerPhone="+x+"&buyerEmail="+C+"&buyerFirstName="+E+"&buyerLastName="+w,success:function(_){if(""!=_)if(loader_hide(),"true"==_.redirectionFlag)$("#frmerror").html(_.redirection),$("#error").submit();else{data1=JSON.parse(_);data1.id;var T=data1.paylater;if("agreed"==data1.status&&T)$("#epay-otp").fadeIn(),$("#P3").addClass("hold"),$("body").addClass("otpClass"),$("body").hasClass("otpClass")&&($(".r-tabs-nav li").hide(),$("#pay_later").parent().show()),$.ajax({type:"POST",dataType:"json",url:"/paylater/newindex_api.php",data:"action=checkcredit&privatekey="+e+"&orderid="+a+"&transactionId="+t+"&mercid="+n+"&amount="+r+"&isocurrency="+s+"&currency="+i+"&buyerPhone1="+l+"&buyerEmail1="+o+"&buyerFirstName1="+d+"&buyerLastName1="+c+"&buyerAddress="+p+"&buyerCity="+m+"&buyerState="+u+"&buyerCountry="+v+"&buyerPinCode="+b+"&mobile_no="+l+"&customvar="+h+"&txnsubtype="+f+"&checksum="+g+"&pan="+pan+"&aadhar="+aadhar+"&otp="+otp+"&divFlag="+divFlag+"&rid="+k+"&buyerPhone="+x+"&buyerEmail="+C+"&buyerFirstName="+E+"&buyerLastName="+w,success:function(e){data1=JSON.parse(e),data1.availableCreditLimit>=r&&$("#avail-bal").html("Available credit limit : <strong>INR "+data1.availableCreditLimit+"<strong>")}});else{if("false"!=data1.redirectionFlag)return showfrmError(data1.message),!1;callNewIndexapi("updatefailTransaction",e,a,k,r,s,i,n,l,o,d,c,p,m,u,v,b,y,h,f,g,pan,aadhar,otp,divFlag="validatePanAdhar",x,C,E,w)}}else callNewIndexapi("updatefailTransaction",e,a,k,r,s,i,n,l,o,d,c,p,m,u,v,b,y,h,f,g,pan,aadhar,otp,divFlag="validatePanAdhar",x,C,E,w)}})}$("#epay-details").hide(),$("#payltrNote").hide(),$("#P1").removeClass("hold"),$("#P1").addClass("comp"),$("#P2").addClass("hold"),"none"!=govtIdRequired&&($("#epay-uid").fadeIn(),$("body").addClass("otpClass"),$("body").hasClass("otpClass")&&($(".r-tabs-nav li").hide(),$("#pay_later").parent().show()))}else{if("invalidInput"==data1.reason&&400==data1.code)return showfrmError(data1.message),!1;callNewIndexapi("updatefailTransaction",e,a,k,r,s,i,n,l,o,d,c,p,m,u,v,b,y,h,f,g,pan,aadhar,otp,divFlag="checkEligibility",x,C,E,w)}}else callNewIndexapi("updatefailTransaction",e,a,k,r,s,i,n,l,o,d,c,p,m,u,v,b,y,h,f,g,pan,aadhar,otp,divFlag="checkEligibility",x,C,E,w)}})}),$("#payltrCheck1").click(function(){$(this).is(":checked")?($("#pay-proceed").removeAttr("disabled"),$("#pay-proceed").removeClass("disable-btn")):($("#pay-proceed").attr("disabled",!0),$("#pay-proceed").addClass("disable-btn"))}),$("#kissht-pay-proceed").click(function(){$(".kissht-list").show(),$(".kissht-loan").show()}),window.modalCallback=function(e,a){postRedirectUrl(e,a)},$(document).ready(function(){function e(){$("#tab_menu_list .r-tabs-anchor").on("click",function(e){if(!$(e.currentTarget).parents(".r-tabs-state-disabled").length&&!$(e.currentTarget).parents(".offer-block").length){var t=$(e.currentTarget).attr("id");$("#tab_menu_list .r-tabs-tab").addClass("r-tabs-state-default").removeClass("r-tabs-state-active"),$(e.currentTarget).closest(".r-tabs-tab").addClass("r-tabs-state-active").removeClass("r-tabs-state-default"),a(t)}})}function a(e){switch(e){case"credit_card":r(e,"credit-card.html",bindCCEvent),$(".Credit-input-block").length>0&&($(".listing-panel").length>0||$(".signup-in-block").length>0)&&($(".listing-panel").hide(),$(".signup-in-block").show());break;case"debit_card":r(e,"debit-card.html",bindDCEvent),$(".Debit-input-block").length>0&&($(".listing-panel").length>0||$(".signup-in-block").length>0)&&($(".listing-panel").hide(),$(".signup-in-block").show());break;case"net_banking":r(e,"net-banking.html",bindNetEvent);break;case"cash":r(e,"cash.html",bindCashEvents);break;case"emi":r(e,"emi.html",bindEmiEvent);break;case"rtgs":r(e,"rtgs.html");break;case"wallet":r(e,"wallet.html",bindWalletEvent);break;case"Amex-click":r(e,"amex-on-click.html");break;case"Express_Payment":s(e);break;case"UPI":r(e,"upi.html",bindUpiEvent);break;case"pay_later":r(e,"pay-later-block.html",bindPayLaterEvents);break;case"imps":r(e,"imps.html");break;case"va":r(e,"virtual-account.html",bindVAevent);break;case"aloan":r(e,"air-loan.html",bindAirloanEvents);break;case"btqr":r(e,"bharat_qr.html",bindBharatQrEvents)}}function t(e){$(".tab-based-logos").removeClass("pwdby-paylater mastvisaamex-logo"),"credit_card"==e||"debit_card"==e?$(".tab-based-logos").addClass("mastvisaamex-logo"):"pay_later"==e&&$(".tab-based-logos").addClass("pwdby-paylater")}function r(e,a,r){if($("#tab-"+e).length)$(".payment-tabs-container .r-tabs-panel").hide(),$("#tab-"+e).show(),t(e);else{$(".tab-loader").show(),$(".payment-tabs-container .r-tabs-panel").hide();var s=$("<div>").attr({class:"r-tabs-panel r-tabs-state-active tab-"+e,id:"tab-"+e});$(".payment-tabs-container").append(s),s.load("templates/"+a,"",function(){if(s.find("form").append($(".data-input-tags").html()),t(e),i()){var a=$("<div>").attr({class:"r-tabs-accordion-title r-tabs-state-default"}),n=$("<a>").attr({href:"#tab-"+e,class:"r-tabs-anchor"});a.insertBefore(".tab-"+e),a.append(n),n.html($(".r-tabs-tab #"+e).text()),setTimeout(function(){$(".r-tabs-panel").hide(),$(".r-tabs-panel:first").show(),i()?($("#tab_menu_list .r-tabs-tab").removeClass("r-tabs-state-active").addClass("r-tabs-state-default"),$(".payment-tabs-container .r-tabs-accordion-title:first").addClass("r-tabs-state-active").removeClass("r-tabs-state-default"),$("#tab_menu_list .r-tabs-tab:first").addClass("r-tabs-state-active").removeClass("r-tabs-state-default"),$($(".payment-tabs-container .r-tabs-state-active a").attr("href")).show()):($($(".r-tabs-accordion-title")[0]).addClass("r-tabs-state-active").removeClass("r-tabs-state-default"),$("#tab-"+$("#tab_menu_list .r-tabs-state-active a").attr("id")).show()),a.on("click",function(e){var a=$(e.currentTarget).find(".r-tabs-anchor");$(".r-tabs-accordion-title,#tab_menu_list .r-tabs-tab").removeClass("r-tabs-state-active").addClass("r-tabs-state-default"),$(".r-tabs-panel").hide(),a.hasClass("active")||(a.addClass("active"),a.parent(".r-tabs-accordion-title").addClass("r-tabs-state-active"),$("#tab_menu_list #"+a.attr("href").replace("#tab-","")).parents(".r-tabs-tab").addClass("r-tabs-state-active").removeClass("r-tabs-state-default")),$(a.attr("href")).show()})},0),$(".js_d_cvv,.js_c_cvv,.js_emi_cvv").attr("type","tel")}r&&r(),$(".tab-loader").hide(),$("form").attr("target",form_target),$(".ttn-submit").on("click",function(e){ga("send","event",{eventAction:"submit",eventCategory:"Payment Mode_#trans_id#",eventLabel:$(e.currentTarget).data("pay-id")})})})}}function s(e){r(e,"express_payment.html",bindExpressPayments),"Y"===$('[name="tokenflg"]').val()&&"Y"===$('[name="scUserRegistered"]').val()&&($(".listing-panel").length>0||$(".signup-in-block").length>0)?($(".listing-panel").show(),$(".signup-in-block").hide()):($(".listing-panel").hide(),$(".signup-in-block").show())}function i(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||window.innerWidth<=768}!function(){if(i()){for(var t=$(".r-tabs-nav a"),r=0;r<t.length;r++)a($(t[r]).attr("id"));$(".offer-block .r-tabs-accordion-title:first").addClass("r-tabs-state-active").removeClass("r-tabs-state-default"),e()}else e(),function(){for(var e=$(".offer-block .r-tabs-anchor"),t=0;t<e.length;t++)a($(e[t]).data("render-id"))}(),"Y"===$("#tokenflg").val()&&"Y"===$('[name="scUserRegistered"]').val()?s("Express_Payment"):a($("#tab_menu_list .r-tabs-state-active a").attr("id"));$(".offer-block .r-tabs-anchor")&&$(".offer-block .r-tabs-anchor").length&&$(".offer-block .r-tabs-anchor").off("click").on("click",function(e){$(".offer-block .r-tabs-accordion-title").removeClass("r-tabs-state-active").addClass("r-tabs-state-default"),$(e.currentTarget).parents(".r-tabs-accordion-title").addClass("r-tabs-state-active").removeClass("r-tabs-state-default"),$(".offer-block .r-tabs-panel").hide().removeClass("r-tabs-state-active").addClass("r-tabs-state-default"),$($(e.currentTarget).attr("href")).show().addClass("r-tabs-state-active").removeClass("r-tabs-state-default")}),setTimeout(function(){$(".offer-block .r-tabs-panel").hide(),$($(".offer-block .r-tabs-state-active a").attr("href")).show()},0),$("body").addClass("kit-type-"+$("#kit_type").val()),renderSelectedTabMethod=a,isMobileCheck=i}()}),$(document).ready(function(){console.log("Hi we are in!!!"),loadTranslateJson()});